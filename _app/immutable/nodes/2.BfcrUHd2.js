import{c as He,a as V,t as R}from"../chunks/NO-mRj0K.js";import"../chunks/PIshycqp.js";import{af as Ze,b as We,B as ce,h as U,a6 as ze,y as Qe,k as E,N as Ke,z as je,A as Ae,C as de,g as te,a9 as De,D as Me,d as Le,F as et,an as he,ad as Fe,a1 as Ie,ao as me,T as tt,ap as Pe,aq as be,ar as nt,ac as st,as as rt,f as it,at as Ee,au as ot,a7 as at,a3 as ft,av as Re,J as ut,aw as lt,q as Te,ak as q,Q as pe,R as X,i as se,s as ye,x as G,v as F,w as C,t as D,ax as ct,al as dt}from"../chunks/n40Usgcr.js";import{s as K,d as Be,e as ht}from"../chunks/CYHEETAa.js";import{o as gt}from"../chunks/Crg0E7TV.js";import{p as pt,i as W,b as vt}from"../chunks/Bt2V4Niv.js";import"../chunks/CFJsfQHW.js";function oe(t,e){return e}function Nt(t,e,n,i){for(var r=[],s=e.length,a=0;a<s;a++)nt(e[a].e,r,!0);var f=s>0&&r.length===0&&n!==null;if(f){var o=n.parentNode;st(o),o.append(n),i.clear(),J(t,e[0].prev,e[s-1].next)}rt(r,()=>{for(var u=0;u<s;u++){var l=e[u];f||(i.delete(l.k),J(t,l.prev,l.next)),it(l.e,!f)}})}function ae(t,e,n,i,r,s=null){var a=t,f={flags:e,items:new Map,first:null},o=(e&Re)!==0;if(o){var u=t;a=U?ce(ze(u)):u.appendChild(Ze())}U&&Qe();var l=null,d=!1,c=Ke(()=>{var g=n();return ft(g)?g:g==null?[]:Fe(g)});We(()=>{var g=E(c),h=g.length;if(d&&h===0)return;d=h===0;let v=!1;if(U){var N=a.data===je;N!==(h===0)&&(a=Ae(),ce(a),de(!1),v=!0)}if(U){for(var A=null,O,T=0;T<h;T++){if(te.nodeType===8&&te.data===De){a=te,v=!0,de(!1);break}var p=g[T],b=i(p,T);O=$e(te,f,A,null,p,b,T,r,e,n),f.items.set(b,O),A=O}h>0&&ce(Ae())}U||bt(g,f,a,r,e,i,n),s!==null&&(h===0?l?Me(l):l=Le(()=>s(a)):l!==null&&et(l,()=>{l=null})),v&&de(!0),E(c)}),U&&(a=te)}function bt(t,e,n,i,r,s,a){var L,B,S,$;var f=(r&lt)!==0,o=(r&(Ee|be))!==0,u=t.length,l=e.items,d=e.first,c=d,g,h=null,v,N=[],A=[],O,T,p,b;if(f)for(b=0;b<u;b+=1)O=t[b],T=s(O,b),p=l.get(T),p!==void 0&&((L=p.a)==null||L.measure(),(v??(v=new Set)).add(p));for(b=0;b<u;b+=1){if(O=t[b],T=s(O,b),p=l.get(T),p===void 0){var j=c?c.e.nodes_start:n;h=$e(j,e,h,h===null?e.first:h.next,O,T,b,i,r,a),l.set(T,h),N=[],A=[],c=h.next;continue}if(o&&Et(p,O,b,r),(p.e.f&he)!==0&&(Me(p.e),f&&((B=p.a)==null||B.unfix(),(v??(v=new Set)).delete(p))),p!==c){if(g!==void 0&&g.has(p)){if(N.length<A.length){var M=A[0],y;h=M.prev;var m=N[0],w=N[N.length-1];for(y=0;y<N.length;y+=1)Ce(N[y],M,n);for(y=0;y<A.length;y+=1)g.delete(A[y]);J(e,m.prev,w.next),J(e,h,m),J(e,w,M),c=M,h=w,b-=1,N=[],A=[]}else g.delete(p),Ce(p,c,n),J(e,p.prev,p.next),J(e,p,h===null?e.first:h.next),J(e,h,p),h=p;continue}for(N=[],A=[];c!==null&&c.k!==T;)(c.e.f&he)===0&&(g??(g=new Set)).add(c),A.push(c),c=c.next;if(c===null)continue;p=c}N.push(p),h=p,c=p.next}if(c!==null||g!==void 0){for(var _=g===void 0?[]:Fe(g);c!==null;)(c.e.f&he)===0&&_.push(c),c=c.next;var P=_.length;if(P>0){var k=(r&Re)!==0&&u===0?n:null;if(f){for(b=0;b<P;b+=1)(S=_[b].a)==null||S.measure();for(b=0;b<P;b+=1)($=_[b].a)==null||$.fix()}Nt(e,_,k,l)}}f&&ut(()=>{var Y;if(v!==void 0)for(p of v)(Y=p.a)==null||Y.apply()}),Ie.first=e.first&&e.first.e,Ie.last=h&&h.e}function Et(t,e,n,i){(i&Ee)!==0&&me(t.v,e),(i&be)!==0?me(t.i,n):t.i=n}function $e(t,e,n,i,r,s,a,f,o,u){var l=(o&Ee)!==0,d=(o&ot)===0,c=l?d?tt(r):Pe(r):r,g=(o&be)===0?a:Pe(a),h={i:g,v:c,k:s,a:null,e:null,prev:n,next:i};try{return h.e=Le(()=>f(t,c,g,u),U),h.e.prev=n&&n.e,h.e.next=i&&i.e,n===null?e.first=h:(n.next=h,n.e.next=h.e),i!==null&&(i.prev=h,i.e.prev=h.e),h}finally{}}function Ce(t,e,n){for(var i=t.next?t.next.e.nodes_start:n,r=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==i;){var a=at(s);r.before(s),s=a}}function J(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Tt(t,e){return t==null?null:String(t)}function yt(t,e,n,i){var r=t.__style;if(U||r!==e){var s=Tt(e);(!U||s!==t.getAttribute("style"))&&(s==null?t.removeAttribute("style"):t.style.cssText=s),t.__style=e}return i}const Xe=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",wt=Xe+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",_t="["+Xe+"]["+wt+"]*",At=new RegExp("^"+_t+"$");function Ye(t,e){const n=[];let i=e.exec(t);for(;i;){const r=[];r.startIndex=e.lastIndex-i[0].length;const s=i.length;for(let a=0;a<s;a++)r.push(i[a]);n.push(r),i=e.exec(t)}return n}const we=function(t){const e=At.exec(t);return!(e===null||typeof e>"u")};function It(t){return typeof t<"u"}const mt={allowBooleanAttributes:!1,unpairedTags:[]};function Pt(t,e){e=Object.assign({},mt,e);const n=[];let i=!1,r=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let s=0;s<t.length;s++)if(t[s]==="<"&&t[s+1]==="?"){if(s+=2,s=Se(t,s),s.err)return s}else if(t[s]==="<"){let a=s;if(s++,t[s]==="!"){s=xe(t,s);continue}else{let f=!1;t[s]==="/"&&(f=!0,s++);let o="";for(;s<t.length&&t[s]!==">"&&t[s]!==" "&&t[s]!=="	"&&t[s]!==`
`&&t[s]!=="\r";s++)o+=t[s];if(o=o.trim(),o[o.length-1]==="/"&&(o=o.substring(0,o.length-1),s--),!Lt(o)){let d;return o.trim().length===0?d="Invalid space after '<'.":d="Tag '"+o+"' is an invalid name.",I("InvalidTag",d,x(t,s))}const u=St(t,s);if(u===!1)return I("InvalidAttr","Attributes for '"+o+"' have open quote.",x(t,s));let l=u.value;if(s=u.index,l[l.length-1]==="/"){const d=s-l.length;l=l.substring(0,l.length-1);const c=ke(l,e);if(c===!0)i=!0;else return I(c.err.code,c.err.msg,x(t,d+c.err.line))}else if(f)if(u.tagClosed){if(l.trim().length>0)return I("InvalidTag","Closing tag '"+o+"' can't have attributes or invalid starting.",x(t,a));if(n.length===0)return I("InvalidTag","Closing tag '"+o+"' has not been opened.",x(t,a));{const d=n.pop();if(o!==d.tagName){let c=x(t,d.tagStartPos);return I("InvalidTag","Expected closing tag '"+d.tagName+"' (opened in line "+c.line+", col "+c.col+") instead of closing tag '"+o+"'.",x(t,a))}n.length==0&&(r=!0)}}else return I("InvalidTag","Closing tag '"+o+"' doesn't have proper closing.",x(t,s));else{const d=ke(l,e);if(d!==!0)return I(d.err.code,d.err.msg,x(t,s-l.length+d.err.line));if(r===!0)return I("InvalidXml","Multiple possible root nodes found.",x(t,s));e.unpairedTags.indexOf(o)!==-1||n.push({tagName:o,tagStartPos:a}),i=!0}for(s++;s<t.length;s++)if(t[s]==="<")if(t[s+1]==="!"){s++,s=xe(t,s);continue}else if(t[s+1]==="?"){if(s=Se(t,++s),s.err)return s}else break;else if(t[s]==="&"){const d=Vt(t,s);if(d==-1)return I("InvalidChar","char '&' is not expected.",x(t,s));s=d}else if(r===!0&&!Oe(t[s]))return I("InvalidXml","Extra text at the end",x(t,s));t[s]==="<"&&s--}}else{if(Oe(t[s]))continue;return I("InvalidChar","char '"+t[s]+"' is not expected.",x(t,s))}if(i){if(n.length==1)return I("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",x(t,n[0].tagStartPos));if(n.length>0)return I("InvalidXml","Invalid '"+JSON.stringify(n.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return I("InvalidXml","Start tag expected.",1);return!0}function Oe(t){return t===" "||t==="	"||t===`
`||t==="\r"}function Se(t,e){const n=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const i=t.substr(n,e-n);if(e>5&&i==="xml")return I("InvalidXml","XML declaration allowed only at the start of the document.",x(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function xe(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let n=1;for(e+=8;e<t.length;e++)if(t[e]==="<")n++;else if(t[e]===">"&&(n--,n===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const Ct='"',Ot="'";function St(t,e){let n="",i="",r=!1;for(;e<t.length;e++){if(t[e]===Ct||t[e]===Ot)i===""?i=t[e]:i!==t[e]||(i="");else if(t[e]===">"&&i===""){r=!0;break}n+=t[e]}return i!==""?!1:{value:n,index:e,tagClosed:r}}const xt=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function ke(t,e){const n=Ye(t,xt),i={};for(let r=0;r<n.length;r++){if(n[r][1].length===0)return I("InvalidAttr","Attribute '"+n[r][2]+"' has no space in starting.",ne(n[r]));if(n[r][3]!==void 0&&n[r][4]===void 0)return I("InvalidAttr","Attribute '"+n[r][2]+"' is without value.",ne(n[r]));if(n[r][3]===void 0&&!e.allowBooleanAttributes)return I("InvalidAttr","boolean attribute '"+n[r][2]+"' is not allowed.",ne(n[r]));const s=n[r][2];if(!Mt(s))return I("InvalidAttr","Attribute '"+s+"' is an invalid name.",ne(n[r]));if(!i.hasOwnProperty(s))i[s]=1;else return I("InvalidAttr","Attribute '"+s+"' is repeated.",ne(n[r]))}return!0}function kt(t,e){let n=/\d/;for(t[e]==="x"&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(n))break}return-1}function Vt(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,kt(t,e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(t[e]===";")break;return-1}return e}function I(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function Mt(t){return we(t)}function Lt(t){return we(t)}function x(t,e){const n=t.substring(0,e).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function ne(t){return t.startIndex+t[1].length}const Ft={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,n){return t},captureMetaData:!1},Rt=function(t){return Object.assign({},Ft,t)};let fe;typeof Symbol!="function"?fe="@@xmlMetadata":fe=Symbol("XML Node Metadata");class z{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,n){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:n})}addChild(e,n){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),n!==void 0&&(this.child[this.child.length-1][fe]={startIndex:n})}static getMetaDataSymbol(){return fe}}function Bt(t,e){const n={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let i=1,r=!1,s=!1,a="";for(;e<t.length;e++)if(t[e]==="<"&&!s){if(r&&Gt(t,e)){e+=7;let f,o;[f,o,e]=$t(t,e+1),o.indexOf("&")===-1&&(n[f]={regx:RegExp(`&${f};`,"g"),val:o})}else if(r&&Jt(t,e)){e+=8;const{index:f}=Yt(t,e+1);e=f}else if(r&&qt(t,e))e+=8;else if(r&&Ht(t,e)){e+=9;const{index:f}=Xt(t,e+1);e=f}else if(Ut)s=!0;else throw new Error("Invalid DOCTYPE");i++,a=""}else if(t[e]===">"){if(s?t[e-1]==="-"&&t[e-2]==="-"&&(s=!1,i--):i--,i===0)break}else t[e]==="["?r=!0:a+=t[e];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:e}}const H=(t,e)=>{for(;e<t.length&&/\s/.test(t[e]);)e++;return e};function $t(t,e){e=H(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e])&&t[e]!=='"'&&t[e]!=="'";)n+=t[e],e++;if(_e(n),e=H(t,e),t.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(t[e]==="%")throw new Error("Parameter entities are not supported");let i="";return[e,i]=ie(t,e,"entity"),e--,[n,i,e]}function Xt(t,e){e=H(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;_e(n),e=H(t,e);const i=t.substring(e,e+6).toUpperCase();if(i!=="SYSTEM"&&i!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${i}"`);e+=i.length,e=H(t,e);let r=null,s=null;if(i==="PUBLIC")[e,r]=ie(t,e,"publicIdentifier"),e=H(t,e),(t[e]==='"'||t[e]==="'")&&([e,s]=ie(t,e,"systemIdentifier"));else if(i==="SYSTEM"&&([e,s]=ie(t,e,"systemIdentifier"),!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:n,publicIdentifier:r,systemIdentifier:s,index:--e}}function ie(t,e,n){let i="";const r=t[e];if(r!=='"'&&r!=="'")throw new Error(`Expected quoted string, found "${r}"`);for(e++;e<t.length&&t[e]!==r;)i+=t[e],e++;if(t[e]!==r)throw new Error(`Unterminated ${n} value`);return e++,[e,i]}function Yt(t,e){e=H(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;if(!_e(n))throw new Error(`Invalid element name: "${n}"`);if(e=H(t,e),t[e]!=="(")throw new Error(`Expected '(', found "${t[e]}"`);e++;let i="";for(;e<t.length&&t[e]!==")";)i+=t[e],e++;if(t[e]!==")")throw new Error("Unterminated content model");return{elementName:n,contentModel:i.trim(),index:e}}function Ut(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function Gt(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function Jt(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function qt(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function Ht(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function _e(t){if(we(t))return t;throw new Error(`Invalid entity name ${t}`)}const Zt=/^[-+]?0x[a-fA-F0-9]+$/,Wt=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,zt={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Qt(t,e={}){if(e=Object.assign({},zt,e),!t||typeof t!="string")return t;let n=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(n))return t;if(t==="0")return 0;if(e.hex&&Zt.test(n))return en(n,16);if(n.search(/.+[eE].+/)!==-1)return jt(t,n,e);{const i=Wt.exec(n);if(i){const r=i[1]||"",s=i[2];let a=Dt(i[3]);const f=r?t[s.length+1]===".":t[s.length]===".";if(!e.leadingZeros&&(s.length>1||s.length===1&&!f))return t;{const o=Number(n),u=String(o);if(o===0||o===-0)return o;if(u.search(/[eE]/)!==-1)return e.eNotation?o:t;if(n.indexOf(".")!==-1)return u==="0"||u===a||u===`${r}${a}`?o:t;let l=s?a:n;return s?l===u||r+l===u?o:t:l===u||l===r+u?o:t}}else return t}}const Kt=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function jt(t,e,n){if(!n.eNotation)return t;const i=e.match(Kt);if(i){let r=i[1]||"";const s=i[3].indexOf("e")===-1?"E":"e",a=i[2],f=r?t[a.length+1]===s:t[a.length]===s;return a.length>1&&f?t:a.length===1&&(i[3].startsWith(`.${s}`)||i[3][0]===s)?Number(e):n.leadingZeros&&!f?(e=(i[1]||"")+i[3],Number(e)):t}else return t}function Dt(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substring(0,t.length-1))),t}function en(t,e){if(parseInt)return parseInt(t,e);if(Number.parseInt)return Number.parseInt(t,e);if(window&&window.parseInt)return window.parseInt(t,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function Ue(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(const n of t)if(typeof n=="string"&&e===n||n instanceof RegExp&&n.test(e))return!0}:()=>!1}class tn{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(n,i)=>String.fromCodePoint(Number.parseInt(i,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(n,i)=>String.fromCodePoint(Number.parseInt(i,16))}},this.addExternalEntities=nn,this.parseXml=fn,this.parseTextData=sn,this.resolveNameSpace=rn,this.buildAttributesMap=an,this.isItStopNode=dn,this.replaceEntitiesValue=ln,this.readStopNodeData=gn,this.saveTextToParentTag=cn,this.addChild=un,this.ignoreAttributesFn=Ue(this.options.ignoreAttributes)}}function nn(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const i=e[n];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:t[i]}}}function sn(t,e,n,i,r,s,a){if(t!==void 0&&(this.options.trimValues&&!i&&(t=t.trim()),t.length>0)){a||(t=this.replaceEntitiesValue(t));const f=this.options.tagValueProcessor(e,t,n,r,s);return f==null?t:typeof f!=typeof t||f!==t?f:this.options.trimValues?Ne(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?Ne(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function rn(t){if(this.options.removeNSPrefix){const e=t.split(":"),n=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=n+e[1])}return t}const on=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function an(t,e,n){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const i=Ye(t,on),r=i.length,s={};for(let a=0;a<r;a++){const f=this.resolveNameSpace(i[a][1]);if(this.ignoreAttributesFn(f,e))continue;let o=i[a][4],u=this.options.attributeNamePrefix+f;if(f.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),o!==void 0){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);const l=this.options.attributeValueProcessor(f,o,e);l==null?s[u]=o:typeof l!=typeof o||l!==o?s[u]=l:s[u]=Ne(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[u]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const a={};return a[this.options.attributesGroupName]=s,a}return s}}const fn=function(t){t=t.replace(/\r\n?/g,`
`);const e=new z("!xml");let n=e,i="",r="";for(let s=0;s<t.length;s++)if(t[s]==="<")if(t[s+1]==="/"){const f=Q(t,">",s,"Closing Tag is not closed.");let o=t.substring(s+2,f).trim();if(this.options.removeNSPrefix){const d=o.indexOf(":");d!==-1&&(o=o.substr(d+1))}this.options.transformTagName&&(o=this.options.transformTagName(o)),n&&(i=this.saveTextToParentTag(i,n,r));const u=r.substring(r.lastIndexOf(".")+1);if(o&&this.options.unpairedTags.indexOf(o)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${o}>`);let l=0;u&&this.options.unpairedTags.indexOf(u)!==-1?(l=r.lastIndexOf(".",r.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=r.lastIndexOf("."),r=r.substring(0,l),n=this.tagsNodeStack.pop(),i="",s=f}else if(t[s+1]==="?"){let f=ve(t,s,!1,"?>");if(!f)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,n,r),!(this.options.ignoreDeclaration&&f.tagName==="?xml"||this.options.ignorePiTags)){const o=new z(f.tagName);o.add(this.options.textNodeName,""),f.tagName!==f.tagExp&&f.attrExpPresent&&(o[":@"]=this.buildAttributesMap(f.tagExp,r,f.tagName)),this.addChild(n,o,r,s)}s=f.closeIndex+1}else if(t.substr(s+1,3)==="!--"){const f=Q(t,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){const o=t.substring(s+4,f-2);i=this.saveTextToParentTag(i,n,r),n.add(this.options.commentPropName,[{[this.options.textNodeName]:o}])}s=f}else if(t.substr(s+1,2)==="!D"){const f=Bt(t,s);this.docTypeEntities=f.entities,s=f.i}else if(t.substr(s+1,2)==="!["){const f=Q(t,"]]>",s,"CDATA is not closed.")-2,o=t.substring(s+9,f);i=this.saveTextToParentTag(i,n,r);let u=this.parseTextData(o,n.tagname,r,!0,!1,!0,!0);u==null&&(u=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:o}]):n.add(this.options.textNodeName,u),s=f+2}else{let f=ve(t,s,this.options.removeNSPrefix),o=f.tagName;const u=f.rawTagName;let l=f.tagExp,d=f.attrExpPresent,c=f.closeIndex;this.options.transformTagName&&(o=this.options.transformTagName(o)),n&&i&&n.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,n,r,!1));const g=n;g&&this.options.unpairedTags.indexOf(g.tagname)!==-1&&(n=this.tagsNodeStack.pop(),r=r.substring(0,r.lastIndexOf("."))),o!==e.tagname&&(r+=r?"."+o:o);const h=s;if(this.isItStopNode(this.options.stopNodes,r,o)){let v="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)o[o.length-1]==="/"?(o=o.substr(0,o.length-1),r=r.substr(0,r.length-1),l=o):l=l.substr(0,l.length-1),s=f.closeIndex;else if(this.options.unpairedTags.indexOf(o)!==-1)s=f.closeIndex;else{const A=this.readStopNodeData(t,u,c+1);if(!A)throw new Error(`Unexpected end of ${u}`);s=A.i,v=A.tagContent}const N=new z(o);o!==l&&d&&(N[":@"]=this.buildAttributesMap(l,r,o)),v&&(v=this.parseTextData(v,o,r,!0,d,!0,!0)),r=r.substr(0,r.lastIndexOf(".")),N.add(this.options.textNodeName,v),this.addChild(n,N,r,h)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){o[o.length-1]==="/"?(o=o.substr(0,o.length-1),r=r.substr(0,r.length-1),l=o):l=l.substr(0,l.length-1),this.options.transformTagName&&(o=this.options.transformTagName(o));const v=new z(o);o!==l&&d&&(v[":@"]=this.buildAttributesMap(l,r,o)),this.addChild(n,v,r,h),r=r.substr(0,r.lastIndexOf("."))}else{const v=new z(o);this.tagsNodeStack.push(n),o!==l&&d&&(v[":@"]=this.buildAttributesMap(l,r,o)),this.addChild(n,v,r,h),n=v}i="",s=c}}else i+=t[s];return e.child};function un(t,e,n,i){this.options.captureMetaData||(i=void 0);const r=this.options.updateTag(e.tagname,n,e[":@"]);r===!1||(typeof r=="string"&&(e.tagname=r),t.addChild(e,i))}const ln=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const n=this.docTypeEntities[e];t=t.replace(n.regx,n.val)}for(let e in this.lastEntities){const n=this.lastEntities[e];t=t.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const n=this.htmlEntities[e];t=t.replace(n.regex,n.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function cn(t,e,n,i){return t&&(i===void 0&&(i=e.child.length===0),t=this.parseTextData(t,e.tagname,n,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,i),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function dn(t,e,n){const i="*."+n;for(const r in t){const s=t[r];if(i===s||e===s)return!0}return!1}function hn(t,e,n=">"){let i,r="";for(let s=e;s<t.length;s++){let a=t[s];if(i)a===i&&(i="");else if(a==='"'||a==="'")i=a;else if(a===n[0])if(n[1]){if(t[s+1]===n[1])return{data:r,index:s}}else return{data:r,index:s};else a==="	"&&(a=" ");r+=a}}function Q(t,e,n,i){const r=t.indexOf(e,n);if(r===-1)throw new Error(i);return r+e.length-1}function ve(t,e,n,i=">"){const r=hn(t,e+1,i);if(!r)return;let s=r.data;const a=r.index,f=s.search(/\s/);let o=s,u=!0;f!==-1&&(o=s.substring(0,f),s=s.substring(f+1).trimStart());const l=o;if(n){const d=o.indexOf(":");d!==-1&&(o=o.substr(d+1),u=o!==r.data.substr(d+1))}return{tagName:o,tagExp:s,closeIndex:a,attrExpPresent:u,rawTagName:l}}function gn(t,e,n){const i=n;let r=1;for(;n<t.length;n++)if(t[n]==="<")if(t[n+1]==="/"){const s=Q(t,">",n,`${e} is not closed`);if(t.substring(n+2,s).trim()===e&&(r--,r===0))return{tagContent:t.substring(i,n),i:s};n=s}else if(t[n+1]==="?")n=Q(t,"?>",n+1,"StopNode is not closed.");else if(t.substr(n+1,3)==="!--")n=Q(t,"-->",n+3,"StopNode is not closed.");else if(t.substr(n+1,2)==="![")n=Q(t,"]]>",n,"StopNode is not closed.")-2;else{const s=ve(t,n,">");s&&((s&&s.tagName)===e&&s.tagExp[s.tagExp.length-1]!=="/"&&r++,n=s.closeIndex)}}function Ne(t,e,n){if(e&&typeof t=="string"){const i=t.trim();return i==="true"?!0:i==="false"?!1:Qt(t,n)}else return It(t)?t:""}const ge=z.getMetaDataSymbol();function pn(t,e){return Ge(t,e)}function Ge(t,e,n){let i;const r={};for(let s=0;s<t.length;s++){const a=t[s],f=vn(a);let o="";if(n===void 0?o=f:o=n+"."+f,f===e.textNodeName)i===void 0?i=a[f]:i+=""+a[f];else{if(f===void 0)continue;if(a[f]){let u=Ge(a[f],e,o);const l=bn(u,e);a[ge]!==void 0&&(u[ge]=a[ge]),a[":@"]?Nn(u,a[":@"],o,e):Object.keys(u).length===1&&u[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?u=u[e.textNodeName]:Object.keys(u).length===0&&(e.alwaysCreateTextNode?u[e.textNodeName]="":u=""),r[f]!==void 0&&r.hasOwnProperty(f)?(Array.isArray(r[f])||(r[f]=[r[f]]),r[f].push(u)):e.isArray(f,o,l)?r[f]=[u]:r[f]=u}}}return typeof i=="string"?i.length>0&&(r[e.textNodeName]=i):i!==void 0&&(r[e.textNodeName]=i),r}function vn(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const i=e[n];if(i!==":@")return i}}function Nn(t,e,n,i){if(e){const r=Object.keys(e),s=r.length;for(let a=0;a<s;a++){const f=r[a];i.isArray(f,n+"."+f,!0,!0)?t[f]=[e[f]]:t[f]=e[f]}}}function bn(t,e){const{textNodeName:n}=e,i=Object.keys(t).length;return!!(i===0||i===1&&(t[n]||typeof t[n]=="boolean"||t[n]===0))}class En{constructor(e){this.externalEntities={},this.options=Rt(e)}parse(e,n){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});const s=Pt(e,n);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const i=new tn(this.options);i.addExternalEntities(this.externalEntities);const r=i.parseXml(e);return this.options.preserveOrder||r===void 0?r:pn(r,this.options)}addEntity(e,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=n}static getMetaDataSymbol(){return z.getMetaDataSymbol()}}const Tn=`
`;function yn(t,e){let n="";return e.format&&e.indentBy.length>0&&(n=Tn),Je(t,e,"",n)}function Je(t,e,n,i){let r="",s=!1;for(let a=0;a<t.length;a++){const f=t[a],o=wn(f);if(o===void 0)continue;let u="";if(n.length===0?u=o:u=`${n}.${o}`,o===e.textNodeName){let h=f[o];_n(u,e)||(h=e.tagValueProcessor(o,h),h=qe(h,e)),s&&(r+=i),r+=h,s=!1;continue}else if(o===e.cdataPropName){s&&(r+=i),r+=`<![CDATA[${f[o][0][e.textNodeName]}]]>`,s=!1;continue}else if(o===e.commentPropName){r+=i+`<!--${f[o][0][e.textNodeName]}-->`,s=!0;continue}else if(o[0]==="?"){const h=Ve(f[":@"],e),v=o==="?xml"?"":i;let N=f[o][0][e.textNodeName];N=N.length!==0?" "+N:"",r+=v+`<${o}${N}${h}?>`,s=!0;continue}let l=i;l!==""&&(l+=e.indentBy);const d=Ve(f[":@"],e),c=i+`<${o}${d}`,g=Je(f[o],e,u,l);e.unpairedTags.indexOf(o)!==-1?e.suppressUnpairedNode?r+=c+">":r+=c+"/>":(!g||g.length===0)&&e.suppressEmptyNode?r+=c+"/>":g&&g.endsWith(">")?r+=c+`>${g}${i}</${o}>`:(r+=c+">",g&&i!==""&&(g.includes("/>")||g.includes("</"))?r+=i+e.indentBy+g+i:r+=g,r+=`</${o}>`),s=!0}return r}function wn(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const i=e[n];if(t.hasOwnProperty(i)&&i!==":@")return i}}function Ve(t,e){let n="";if(t&&!e.ignoreAttributes)for(let i in t){if(!t.hasOwnProperty(i))continue;let r=e.attributeValueProcessor(i,t[i]);r=qe(r,e),r===!0&&e.suppressBooleanAttributes?n+=` ${i.substr(e.attributeNamePrefix.length)}`:n+=` ${i.substr(e.attributeNamePrefix.length)}="${r}"`}return n}function _n(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let n=t.substr(t.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===t||e.stopNodes[i]==="*."+n)return!0;return!1}function qe(t,e){if(t&&t.length>0&&e.processEntities)for(let n=0;n<e.entities.length;n++){const i=e.entities[n];t=t.replace(i.regex,i.val)}return t}const An={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Z(t){this.options=Object.assign({},An,t),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=Ue(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Pn),this.processTextOrObjNode=In,this.options.format?(this.indentate=mn,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Z.prototype.build=function(t){return this.options.preserveOrder?yn(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0,[]).val)};Z.prototype.j2x=function(t,e,n){let i="",r="";const s=n.join(".");for(let a in t)if(Object.prototype.hasOwnProperty.call(t,a))if(typeof t[a]>"u")this.isAttribute(a)&&(r+="");else if(t[a]===null)this.isAttribute(a)||a===this.options.cdataPropName?r+="":a[0]==="?"?r+=this.indentate(e)+"<"+a+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+a+"/"+this.tagEndChar;else if(t[a]instanceof Date)r+=this.buildTextValNode(t[a],a,"",e);else if(typeof t[a]!="object"){const f=this.isAttribute(a);if(f&&!this.ignoreAttributesFn(f,s))i+=this.buildAttrPairStr(f,""+t[a]);else if(!f)if(a===this.options.textNodeName){let o=this.options.tagValueProcessor(a,""+t[a]);r+=this.replaceEntitiesValue(o)}else r+=this.buildTextValNode(t[a],a,"",e)}else if(Array.isArray(t[a])){const f=t[a].length;let o="",u="";for(let l=0;l<f;l++){const d=t[a][l];if(!(typeof d>"u"))if(d===null)a[0]==="?"?r+=this.indentate(e)+"<"+a+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+a+"/"+this.tagEndChar;else if(typeof d=="object")if(this.options.oneListGroup){const c=this.j2x(d,e+1,n.concat(a));o+=c.val,this.options.attributesGroupName&&d.hasOwnProperty(this.options.attributesGroupName)&&(u+=c.attrStr)}else o+=this.processTextOrObjNode(d,a,e,n);else if(this.options.oneListGroup){let c=this.options.tagValueProcessor(a,d);c=this.replaceEntitiesValue(c),o+=c}else o+=this.buildTextValNode(d,a,"",e)}this.options.oneListGroup&&(o=this.buildObjectNode(o,a,u,e)),r+=o}else if(this.options.attributesGroupName&&a===this.options.attributesGroupName){const f=Object.keys(t[a]),o=f.length;for(let u=0;u<o;u++)i+=this.buildAttrPairStr(f[u],""+t[a][f[u]])}else r+=this.processTextOrObjNode(t[a],a,e,n);return{attrStr:i,val:r}};Z.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function In(t,e,n,i){const r=this.j2x(t,n+1,i.concat(e));return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,r.attrStr,n):this.buildObjectNode(r.val,e,r.attrStr,n)}Z.prototype.buildObjectNode=function(t,e,n,i){if(t==="")return e[0]==="?"?this.indentate(i)+"<"+e+n+"?"+this.tagEndChar:this.indentate(i)+"<"+e+n+this.closeTag(e)+this.tagEndChar;{let r="</"+e+this.tagEndChar,s="";return e[0]==="?"&&(s="?",r=""),(n||n==="")&&t.indexOf("<")===-1?this.indentate(i)+"<"+e+n+s+">"+t+r:this.options.commentPropName!==!1&&e===this.options.commentPropName&&s.length===0?this.indentate(i)+`<!--${t}-->`+this.newLine:this.indentate(i)+"<"+e+n+s+this.tagEndChar+t+this.indentate(i)+r}};Z.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};Z.prototype.buildTextValNode=function(t,e,n,i){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(i)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(i)+"<"+e+n+"?"+this.tagEndChar;{let r=this.options.tagValueProcessor(e,t);return r=this.replaceEntitiesValue(r),r===""?this.indentate(i)+"<"+e+n+this.closeTag(e)+this.tagEndChar:this.indentate(i)+"<"+e+n+">"+r+"</"+e+this.tagEndChar}};Z.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const n=this.options.entities[e];t=t.replace(n.regex,n.val)}return t};function mn(t){return this.options.indentBy.repeat(t)}function Pn(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}var Cn=R('<h2 class="svelte-n7vocc">Cultural Reference</h2>'),On=R('<h2 class="svelte-n7vocc">Editorial Commentary:</h2>'),Sn=R('<li class="svelte-n7vocc"> </li>'),xn=R('<h2 class="svelte-n7vocc">Collation:</h2> <ul class="svelte-n7vocc"></ul>',1),kn=R('<h2 class="svelte-n7vocc">Other Notes:</h2>'),Vn=R('<p class="svelte-n7vocc"> </p>'),Mn=R("<!> <!>",1),Ln=R('<div class="svelte-n7vocc"><h1 class="svelte-n7vocc">Notes:</h1> <!></div>');function Fn(t,e){Te(e,!0);let n=pt(e,"internalRef",15),i=q(pe(new Array)),r=q(!0);e.noteData.forEach(o=>{o.type=="collation"&&(console.log(o.text),X(i,JSON.parse(o.text),!0),X(r,!1))});var s=He(),a=se(s);{var f=o=>{var u=Ln(),l=G(F(u),2);ae(l,17,()=>e.noteData,oe,(d,c)=>{var g=Mn(),h=se(g);{var v=T=>{var p=Cn();V(T,p)},N=(T,p)=>{{var b=M=>{var y=On();V(M,y)},j=(M,y)=>{{var m=_=>{var P=xn(),k=G(se(P),2);ae(k,21,()=>E(i),oe,(L,B)=>{var S=Sn(),$=F(S,!0);C(S),D(()=>K($,E(B).item[0]["#text"])),V(L,S)}),C(k),V(_,P)},w=_=>{var P=kn();V(_,P)};W(M,_=>{E(c).type==="collation"?_(m):_(w,!1)},y)}};W(T,M=>{E(c).type==="e"?M(b):M(j,!1)},p)}};W(h,T=>{E(c).type==="culture"?T(v):T(N,!1)})}var A=G(h,2);{var O=T=>{var p=Vn(),b=F(p,!0);C(p),D(()=>K(b,E(c).text)),V(T,p)};W(A,T=>{E(r)==!0&&T(O)})}V(d,g)}),C(u),vt(u,d=>n(d),()=>n()),D(()=>yt(u,`left: ${e.positionX??""}px; top: ${e.positionY??""}px;`)),V(o,u)};W(a,o=>{e.visible==!0&&o(f)})}V(t,s),ye()}function Rn(t,e,n,i){const{clientX:r,clientY:s}=t;console.log("here"),X(e,!0),X(n,r,!0),X(i,s,!0),t.stopPropagation()}var Bn=R('<p class="svelte-m66nwu"> </p>'),$n=R('<h3 class="svelte-m66nwu"> </h3>'),Xn=R("<!> <!>",1);function Yn(t,e){Te(e,!0);let n=q(!1),i=q(0),r=q(0),s=q(void 0);async function a(c){await dt(),E(s)!=null&&E(n)==!0&&(E(s).contains(c.target)||(console.log("clicked outside"),X(n,!1)))}var f=Xn();ht("click",ct,a);var o=se(f);{var u=c=>{var g=Bn();g.__click=[Rn,n,i,r];var h=F(g,!0);C(g),D(()=>K(h,e.pageData.text)),V(c,g)},l=(c,g)=>{{var h=v=>{var N=$n(),A=F(N,!0);C(N),D(()=>K(A,e.pageData.text)),V(v,N)};W(c,v=>{e.pageData.type==="head"&&v(h)},g)}};W(o,c=>{e.pageData.type==="p"?c(u):c(l,!1)})}var d=G(o,2);Fn(d,{get noteData(){return e.pageData.notes},get positionX(){return E(i)},get positionY(){return E(r)},get visible(){return E(n)},get internalRef(){return E(s)},set internalRef(c){X(s,c,!0)}}),V(t,f),ye()}Be(["click"]);function Un(t,e){X(e,E(e)-2),Math.min(Math.max(E(e),0),12)}function Gn(t,e){X(e,E(e)+2),Math.min(Math.max(E(e),0),12)}var Jn=R('<div class="page svelte-1k6udiw"></div>'),qn=R('<div class="book_container svelte-1k6udiw"><div class="header_container svelte-1k6udiw"><h1 class="svelte-1k6udiw"> </h1></div> <div class="book svelte-1k6udiw"></div> <div class="footer_container svelte-1k6udiw"><p class="svelte-1k6udiw"> </p><p class="svelte-1k6udiw"> </p></div></div> <div class="meta_container svelte-1k6udiw"><div class="page_turn_buttons_container svelte-1k6udiw"><button class="svelte-1k6udiw">Previous Page</button><button class="svelte-1k6udiw">Next Page</button></div></div>',1);function Hn(t,e){Te(e,!0);const n={preserveOrder:!0,ignoreAttributes:!1},i=new En(n);new Z;let r=q(pe(new Array)),s=pe(new Array),a=q(0);function f(y){var P,k,L;let m=[];if(y){console.log(JSON.stringify(y));for(const B of y){const S=Object.keys(B)[0],$=(P=B[S])==null?void 0:P[0];var w=new Array,_=new Array;if(((k=B[S])==null?void 0:k.slice(1))!=null&&(w=(L=B[S])==null?void 0:L.slice(1),console.log(JSON.stringify(w)),_=w.map(Y=>Y[":@"]["@_type"])),S==="pb")s.push(m),m=[];else{const Y=typeof $=="object"&&"#text"in $?String($["#text"]):"";let ee=new Array;w.length!=0&&(ee=w.map((re,le)=>_[le]=="collation"?JSON.stringify(re.note[0].list):re.note[0]["#text"]).map((re,le)=>({type:_[le],text:re}))),m.push({type:S,text:Y,notes:ee})}}s.push(m)}}gt(async()=>{var m,w,_,P,k,L,B,S,$,Y,ee,ue;const y=await fetch("https://concurrentsquared.github.io/gh-pages-joyce/joyce.xml");X(r,i.parse(await y.text()),!0),console.log("Here:"+JSON.stringify((_=(w=(m=E(r)[4])==null?void 0:m.TEI[1])==null?void 0:w.text[2])==null?void 0:_.back)),f((L=(k=(P=E(r)[4])==null?void 0:P.TEI[1])==null?void 0:k.text[0])==null?void 0:L.front),f(($=(S=(B=E(r)[4])==null?void 0:B.TEI[1])==null?void 0:S.text[1])==null?void 0:$.body),f((ue=(ee=(Y=E(r)[4])==null?void 0:Y.TEI[1])==null?void 0:ee.text[2])==null?void 0:ue.back),console.log(JSON.stringify(s))});function o(y,m){var w={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},_="";if(y-m>0)return String(y-m);var P=Math.abs(y-m);for(var k of Object.keys(w)){var L=Math.floor(P/w[k]);P-=L*w[k],_+=k.repeat(L)}return _}var u=qn(),l=se(u),d=F(l),c=F(d),g=F(c);C(c),C(d);var h=G(d,2);ae(h,21,()=>s.slice(E(a),E(a)+2),oe,(y,m)=>{var w=Jn();ae(w,21,()=>E(m),oe,(_,P)=>{Yn(_,{get pageData(){return E(P)}})}),C(w),V(y,w)}),C(h);var v=G(h,2),N=F(v),A=F(N,!0);C(N);var O=G(N),T=F(O,!0);C(O),C(v),C(l);var p=G(l,2),b=F(p),j=F(b);j.__click=[Un,a];var M=G(j);M.__click=[Gn,a],C(b),C(p),D((y,m)=>{var w;K(g,`${((w=E(r)[4])==null?void 0:w.TEI[0].teiHeader[0].fileDesc[0].titleStmt[0].title[0]["#text"])??""} by James Joyce`),K(A,y),K(T,m)},[()=>o(E(a),8),()=>o(E(a)+1,8)]),V(t,u),ye()}Be(["click"]);function es(t){Hn(t,{})}export{es as component};
