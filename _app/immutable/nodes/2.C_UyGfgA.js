import{c as He,a as k,t as R}from"../chunks/DhygzYGj.js";import"../chunks/DKOLt9gA.js";import{af as qe,n as We,B as ce,w as Y,a6 as ze,y as Qe,g as E,N as Ke,z as je,A as Ae,C as de,x as ne,a9 as De,D as Me,o as Le,F as et,an as he,ad as Fe,a1 as Ie,ao as me,T as tt,ap as Pe,aq as be,ar as nt,ac as rt,as as st,v as it,at as Ee,au as ot,a7 as at,a3 as ft,av as Re,J as ut,aw as lt,p as we,ak as Q,Q as pe,R as G,i as se,j as Te,s as U,k as F,m as O,t as ee,ax as ct,al as dt}from"../chunks/BbCf6I4f.js";import{s as j,d as Be,e as ht}from"../chunks/BlKkhI7t.js";import{o as gt}from"../chunks/Bj5Ljaro.js";import{p as pt,i as W,b as vt}from"../chunks/BJrOUaV8.js";import"../chunks/Bw5wP1-W.js";function ae(t,e){return e}function Nt(t,e,n,i){for(var s=[],r=e.length,f=0;f<r;f++)nt(e[f].e,s,!0);var a=r>0&&s.length===0&&n!==null;if(a){var o=n.parentNode;rt(o),o.append(n),i.clear(),Z(t,e[0].prev,e[r-1].next)}st(s,()=>{for(var l=0;l<r;l++){var u=e[l];a||(i.delete(u.k),Z(t,u.prev,u.next)),it(u.e,!a)}})}function fe(t,e,n,i,s,r=null){var f=t,a={flags:e,items:new Map,first:null},o=(e&Re)!==0;if(o){var l=t;f=Y?ce(ze(l)):l.appendChild(qe())}Y&&Qe();var u=null,d=!1,c=Ke(()=>{var g=n();return ft(g)?g:g==null?[]:Fe(g)});We(()=>{var g=E(c),h=g.length;if(d&&h===0)return;d=h===0;let v=!1;if(Y){var N=f.data===je;N!==(h===0)&&(f=Ae(),ce(f),de(!1),v=!0)}if(Y){for(var I=null,T,y=0;y<h;y++){if(ne.nodeType===8&&ne.data===De){f=ne,v=!0,de(!1);break}var p=g[y],b=i(p,y);T=$e(ne,a,I,null,p,b,y,s,e,n),a.items.set(b,T),I=T}h>0&&ce(Ae())}Y||bt(g,a,f,s,e,i,n),r!==null&&(h===0?u?Me(u):u=Le(()=>r(f)):u!==null&&et(u,()=>{u=null})),v&&de(!0),E(c)}),Y&&(f=ne)}function bt(t,e,n,i,s,r,f){var S,B,M,L;var a=(s&lt)!==0,o=(s&(Ee|be))!==0,l=t.length,u=e.items,d=e.first,c=d,g,h=null,v,N=[],I=[],T,y,p,b;if(a)for(b=0;b<l;b+=1)T=t[b],y=r(T,b),p=u.get(y),p!==void 0&&((S=p.a)==null||S.measure(),(v??(v=new Set)).add(p));for(b=0;b<l;b+=1){if(T=t[b],y=r(T,b),p=u.get(y),p===void 0){var $=c?c.e.nodes_start:n;h=$e($,e,h,h===null?e.first:h.next,T,y,b,i,s,f),u.set(y,h),N=[],I=[],c=h.next;continue}if(o&&Et(p,T,b,s),(p.e.f&he)!==0&&(Me(p.e),a&&((B=p.a)==null||B.unfix(),(v??(v=new Set)).delete(p))),p!==c){if(g!==void 0&&g.has(p)){if(N.length<I.length){var X=I[0],_;h=X.prev;var C=N[0],w=N[N.length-1];for(_=0;_<N.length;_+=1)Ce(N[_],X,n);for(_=0;_<I.length;_+=1)g.delete(I[_]);Z(e,C.prev,w.next),Z(e,h,C),Z(e,w,X),c=X,h=w,b-=1,N=[],I=[]}else g.delete(p),Ce(p,c,n),Z(e,p.prev,p.next),Z(e,p,h===null?e.first:h.next),Z(e,h,p),h=p;continue}for(N=[],I=[];c!==null&&c.k!==y;)(c.e.f&he)===0&&(g??(g=new Set)).add(c),I.push(c),c=c.next;if(c===null)continue;p=c}N.push(p),h=p,c=p.next}if(c!==null||g!==void 0){for(var A=g===void 0?[]:Fe(g);c!==null;)(c.e.f&he)===0&&A.push(c),c=c.next;var m=A.length;if(m>0){var x=(s&Re)!==0&&l===0?n:null;if(a){for(b=0;b<m;b+=1)(M=A[b].a)==null||M.measure();for(b=0;b<m;b+=1)(L=A[b].a)==null||L.fix()}Nt(e,A,x,u)}}a&&ut(()=>{var D;if(v!==void 0)for(p of v)(D=p.a)==null||D.apply()}),Ie.first=e.first&&e.first.e,Ie.last=h&&h.e}function Et(t,e,n,i){(i&Ee)!==0&&me(t.v,e),(i&be)!==0?me(t.i,n):t.i=n}function $e(t,e,n,i,s,r,f,a,o,l){var u=(o&Ee)!==0,d=(o&ot)===0,c=u?d?tt(s):Pe(s):s,g=(o&be)===0?f:Pe(f),h={i:g,v:c,k:r,a:null,e:null,prev:n,next:i};try{return h.e=Le(()=>a(t,c,g,l),Y),h.e.prev=n&&n.e,h.e.next=i&&i.e,n===null?e.first=h:(n.next=h,n.e.next=h.e),i!==null&&(i.prev=h,i.e.prev=h.e),h}finally{}}function Ce(t,e,n){for(var i=t.next?t.next.e.nodes_start:n,s=e?e.e.nodes_start:n,r=t.e.nodes_start;r!==i;){var f=at(r);s.before(r),r=f}}function Z(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function wt(t,e){return t==null?null:String(t)}function Tt(t,e,n,i){var s=t.__style;if(Y||s!==e){var r=wt(e);(!Y||r!==t.getAttribute("style"))&&(r==null?t.removeAttribute("style"):t.style.cssText=r),t.__style=e}return i}const Xe=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",yt=Xe+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",_t="["+Xe+"]["+yt+"]*",At=new RegExp("^"+_t+"$");function Ye(t,e){const n=[];let i=e.exec(t);for(;i;){const s=[];s.startIndex=e.lastIndex-i[0].length;const r=i.length;for(let f=0;f<r;f++)s.push(i[f]);n.push(s),i=e.exec(t)}return n}const ye=function(t){const e=At.exec(t);return!(e===null||typeof e>"u")};function It(t){return typeof t<"u"}const mt={allowBooleanAttributes:!1,unpairedTags:[]};function Pt(t,e){e=Object.assign({},mt,e);const n=[];let i=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let r=0;r<t.length;r++)if(t[r]==="<"&&t[r+1]==="?"){if(r+=2,r=xe(t,r),r.err)return r}else if(t[r]==="<"){let f=r;if(r++,t[r]==="!"){r=Se(t,r);continue}else{let a=!1;t[r]==="/"&&(a=!0,r++);let o="";for(;r<t.length&&t[r]!==">"&&t[r]!==" "&&t[r]!=="	"&&t[r]!==`
`&&t[r]!=="\r";r++)o+=t[r];if(o=o.trim(),o[o.length-1]==="/"&&(o=o.substring(0,o.length-1),r--),!Lt(o)){let d;return o.trim().length===0?d="Invalid space after '<'.":d="Tag '"+o+"' is an invalid name.",P("InvalidTag",d,V(t,r))}const l=xt(t,r);if(l===!1)return P("InvalidAttr","Attributes for '"+o+"' have open quote.",V(t,r));let u=l.value;if(r=l.index,u[u.length-1]==="/"){const d=r-u.length;u=u.substring(0,u.length-1);const c=Ve(u,e);if(c===!0)i=!0;else return P(c.err.code,c.err.msg,V(t,d+c.err.line))}else if(a)if(l.tagClosed){if(u.trim().length>0)return P("InvalidTag","Closing tag '"+o+"' can't have attributes or invalid starting.",V(t,f));if(n.length===0)return P("InvalidTag","Closing tag '"+o+"' has not been opened.",V(t,f));{const d=n.pop();if(o!==d.tagName){let c=V(t,d.tagStartPos);return P("InvalidTag","Expected closing tag '"+d.tagName+"' (opened in line "+c.line+", col "+c.col+") instead of closing tag '"+o+"'.",V(t,f))}n.length==0&&(s=!0)}}else return P("InvalidTag","Closing tag '"+o+"' doesn't have proper closing.",V(t,r));else{const d=Ve(u,e);if(d!==!0)return P(d.err.code,d.err.msg,V(t,r-u.length+d.err.line));if(s===!0)return P("InvalidXml","Multiple possible root nodes found.",V(t,r));e.unpairedTags.indexOf(o)!==-1||n.push({tagName:o,tagStartPos:f}),i=!0}for(r++;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="!"){r++,r=Se(t,r);continue}else if(t[r+1]==="?"){if(r=xe(t,++r),r.err)return r}else break;else if(t[r]==="&"){const d=kt(t,r);if(d==-1)return P("InvalidChar","char '&' is not expected.",V(t,r));r=d}else if(s===!0&&!Oe(t[r]))return P("InvalidXml","Extra text at the end",V(t,r));t[r]==="<"&&r--}}else{if(Oe(t[r]))continue;return P("InvalidChar","char '"+t[r]+"' is not expected.",V(t,r))}if(i){if(n.length==1)return P("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",V(t,n[0].tagStartPos));if(n.length>0)return P("InvalidXml","Invalid '"+JSON.stringify(n.map(r=>r.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return P("InvalidXml","Start tag expected.",1);return!0}function Oe(t){return t===" "||t==="	"||t===`
`||t==="\r"}function xe(t,e){const n=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const i=t.substr(n,e-n);if(e>5&&i==="xml")return P("InvalidXml","XML declaration allowed only at the start of the document.",V(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function Se(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let n=1;for(e+=8;e<t.length;e++)if(t[e]==="<")n++;else if(t[e]===">"&&(n--,n===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const Ct='"',Ot="'";function xt(t,e){let n="",i="",s=!1;for(;e<t.length;e++){if(t[e]===Ct||t[e]===Ot)i===""?i=t[e]:i!==t[e]||(i="");else if(t[e]===">"&&i===""){s=!0;break}n+=t[e]}return i!==""?!1:{value:n,index:e,tagClosed:s}}const St=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Ve(t,e){const n=Ye(t,St),i={};for(let s=0;s<n.length;s++){if(n[s][1].length===0)return P("InvalidAttr","Attribute '"+n[s][2]+"' has no space in starting.",re(n[s]));if(n[s][3]!==void 0&&n[s][4]===void 0)return P("InvalidAttr","Attribute '"+n[s][2]+"' is without value.",re(n[s]));if(n[s][3]===void 0&&!e.allowBooleanAttributes)return P("InvalidAttr","boolean attribute '"+n[s][2]+"' is not allowed.",re(n[s]));const r=n[s][2];if(!Mt(r))return P("InvalidAttr","Attribute '"+r+"' is an invalid name.",re(n[s]));if(!i.hasOwnProperty(r))i[r]=1;else return P("InvalidAttr","Attribute '"+r+"' is repeated.",re(n[s]))}return!0}function Vt(t,e){let n=/\d/;for(t[e]==="x"&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(n))break}return-1}function kt(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,Vt(t,e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(t[e]===";")break;return-1}return e}function P(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function Mt(t){return ye(t)}function Lt(t){return ye(t)}function V(t,e){const n=t.substring(0,e).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function re(t){return t.startIndex+t[1].length}const Ft={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,n){return t},captureMetaData:!1},Rt=function(t){return Object.assign({},Ft,t)};let ue;typeof Symbol!="function"?ue="@@xmlMetadata":ue=Symbol("XML Node Metadata");class z{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,n){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:n})}addChild(e,n){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),n!==void 0&&(this.child[this.child.length-1][ue]={startIndex:n})}static getMetaDataSymbol(){return ue}}function Bt(t,e){const n={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let i=1,s=!1,r=!1,f="";for(;e<t.length;e++)if(t[e]==="<"&&!r){if(s&&Gt(t,e)){e+=7;let a,o;[a,o,e]=$t(t,e+1),o.indexOf("&")===-1&&(n[a]={regx:RegExp(`&${a};`,"g"),val:o})}else if(s&&Jt(t,e)){e+=8;const{index:a}=Yt(t,e+1);e=a}else if(s&&Zt(t,e))e+=8;else if(s&&Ht(t,e)){e+=9;const{index:a}=Xt(t,e+1);e=a}else if(Ut)r=!0;else throw new Error("Invalid DOCTYPE");i++,f=""}else if(t[e]===">"){if(r?t[e-1]==="-"&&t[e-2]==="-"&&(r=!1,i--):i--,i===0)break}else t[e]==="["?s=!0:f+=t[e];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:e}}const H=(t,e)=>{for(;e<t.length&&/\s/.test(t[e]);)e++;return e};function $t(t,e){e=H(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e])&&t[e]!=='"'&&t[e]!=="'";)n+=t[e],e++;if(_e(n),e=H(t,e),t.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(t[e]==="%")throw new Error("Parameter entities are not supported");let i="";return[e,i]=oe(t,e,"entity"),e--,[n,i,e]}function Xt(t,e){e=H(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;_e(n),e=H(t,e);const i=t.substring(e,e+6).toUpperCase();if(i!=="SYSTEM"&&i!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${i}"`);e+=i.length,e=H(t,e);let s=null,r=null;if(i==="PUBLIC")[e,s]=oe(t,e,"publicIdentifier"),e=H(t,e),(t[e]==='"'||t[e]==="'")&&([e,r]=oe(t,e,"systemIdentifier"));else if(i==="SYSTEM"&&([e,r]=oe(t,e,"systemIdentifier"),!r))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:n,publicIdentifier:s,systemIdentifier:r,index:--e}}function oe(t,e,n){let i="";const s=t[e];if(s!=='"'&&s!=="'")throw new Error(`Expected quoted string, found "${s}"`);for(e++;e<t.length&&t[e]!==s;)i+=t[e],e++;if(t[e]!==s)throw new Error(`Unterminated ${n} value`);return e++,[e,i]}function Yt(t,e){e=H(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;if(!_e(n))throw new Error(`Invalid element name: "${n}"`);if(e=H(t,e),t[e]!=="(")throw new Error(`Expected '(', found "${t[e]}"`);e++;let i="";for(;e<t.length&&t[e]!==")";)i+=t[e],e++;if(t[e]!==")")throw new Error("Unterminated content model");return{elementName:n,contentModel:i.trim(),index:e}}function Ut(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function Gt(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function Jt(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function Zt(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function Ht(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function _e(t){if(ye(t))return t;throw new Error(`Invalid entity name ${t}`)}const qt=/^[-+]?0x[a-fA-F0-9]+$/,Wt=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,zt={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Qt(t,e={}){if(e=Object.assign({},zt,e),!t||typeof t!="string")return t;let n=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(n))return t;if(t==="0")return 0;if(e.hex&&qt.test(n))return en(n,16);if(n.search(/.+[eE].+/)!==-1)return jt(t,n,e);{const i=Wt.exec(n);if(i){const s=i[1]||"",r=i[2];let f=Dt(i[3]);const a=s?t[r.length+1]===".":t[r.length]===".";if(!e.leadingZeros&&(r.length>1||r.length===1&&!a))return t;{const o=Number(n),l=String(o);if(o===0||o===-0)return o;if(l.search(/[eE]/)!==-1)return e.eNotation?o:t;if(n.indexOf(".")!==-1)return l==="0"||l===f||l===`${s}${f}`?o:t;let u=r?f:n;return r?u===l||s+u===l?o:t:u===l||u===s+l?o:t}}else return t}}const Kt=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function jt(t,e,n){if(!n.eNotation)return t;const i=e.match(Kt);if(i){let s=i[1]||"";const r=i[3].indexOf("e")===-1?"E":"e",f=i[2],a=s?t[f.length+1]===r:t[f.length]===r;return f.length>1&&a?t:f.length===1&&(i[3].startsWith(`.${r}`)||i[3][0]===r)?Number(e):n.leadingZeros&&!a?(e=(i[1]||"")+i[3],Number(e)):t}else return t}function Dt(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substring(0,t.length-1))),t}function en(t,e){if(parseInt)return parseInt(t,e);if(Number.parseInt)return Number.parseInt(t,e);if(window&&window.parseInt)return window.parseInt(t,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function Ue(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(const n of t)if(typeof n=="string"&&e===n||n instanceof RegExp&&n.test(e))return!0}:()=>!1}class tn{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(n,i)=>String.fromCodePoint(Number.parseInt(i,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(n,i)=>String.fromCodePoint(Number.parseInt(i,16))}},this.addExternalEntities=nn,this.parseXml=fn,this.parseTextData=rn,this.resolveNameSpace=sn,this.buildAttributesMap=an,this.isItStopNode=dn,this.replaceEntitiesValue=ln,this.readStopNodeData=gn,this.saveTextToParentTag=cn,this.addChild=un,this.ignoreAttributesFn=Ue(this.options.ignoreAttributes)}}function nn(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const i=e[n];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:t[i]}}}function rn(t,e,n,i,s,r,f){if(t!==void 0&&(this.options.trimValues&&!i&&(t=t.trim()),t.length>0)){f||(t=this.replaceEntitiesValue(t));const a=this.options.tagValueProcessor(e,t,n,s,r);return a==null?t:typeof a!=typeof t||a!==t?a:this.options.trimValues?Ne(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?Ne(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function sn(t){if(this.options.removeNSPrefix){const e=t.split(":"),n=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=n+e[1])}return t}const on=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function an(t,e,n){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const i=Ye(t,on),s=i.length,r={};for(let f=0;f<s;f++){const a=this.resolveNameSpace(i[f][1]);if(this.ignoreAttributesFn(a,e))continue;let o=i[f][4],l=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),o!==void 0){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);const u=this.options.attributeValueProcessor(a,o,e);u==null?r[l]=o:typeof u!=typeof o||u!==o?r[l]=u:r[l]=Ne(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(r[l]=!0)}if(!Object.keys(r).length)return;if(this.options.attributesGroupName){const f={};return f[this.options.attributesGroupName]=r,f}return r}}const fn=function(t){t=t.replace(/\r\n?/g,`
`);const e=new z("!xml");let n=e,i="",s="";for(let r=0;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){const a=K(t,">",r,"Closing Tag is not closed.");let o=t.substring(r+2,a).trim();if(this.options.removeNSPrefix){const d=o.indexOf(":");d!==-1&&(o=o.substr(d+1))}this.options.transformTagName&&(o=this.options.transformTagName(o)),n&&(i=this.saveTextToParentTag(i,n,s));const l=s.substring(s.lastIndexOf(".")+1);if(o&&this.options.unpairedTags.indexOf(o)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${o}>`);let u=0;l&&this.options.unpairedTags.indexOf(l)!==-1?(u=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):u=s.lastIndexOf("."),s=s.substring(0,u),n=this.tagsNodeStack.pop(),i="",r=a}else if(t[r+1]==="?"){let a=ve(t,r,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,n,s),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const o=new z(a.tagName);o.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(o[":@"]=this.buildAttributesMap(a.tagExp,s,a.tagName)),this.addChild(n,o,s,r)}r=a.closeIndex+1}else if(t.substr(r+1,3)==="!--"){const a=K(t,"-->",r+4,"Comment is not closed.");if(this.options.commentPropName){const o=t.substring(r+4,a-2);i=this.saveTextToParentTag(i,n,s),n.add(this.options.commentPropName,[{[this.options.textNodeName]:o}])}r=a}else if(t.substr(r+1,2)==="!D"){const a=Bt(t,r);this.docTypeEntities=a.entities,r=a.i}else if(t.substr(r+1,2)==="!["){const a=K(t,"]]>",r,"CDATA is not closed.")-2,o=t.substring(r+9,a);i=this.saveTextToParentTag(i,n,s);let l=this.parseTextData(o,n.tagname,s,!0,!1,!0,!0);l==null&&(l=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:o}]):n.add(this.options.textNodeName,l),r=a+2}else{let a=ve(t,r,this.options.removeNSPrefix),o=a.tagName;const l=a.rawTagName;let u=a.tagExp,d=a.attrExpPresent,c=a.closeIndex;this.options.transformTagName&&(o=this.options.transformTagName(o)),n&&i&&n.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,n,s,!1));const g=n;g&&this.options.unpairedTags.indexOf(g.tagname)!==-1&&(n=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),o!==e.tagname&&(s+=s?"."+o:o);const h=r;if(this.isItStopNode(this.options.stopNodes,s,o)){let v="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)o[o.length-1]==="/"?(o=o.substr(0,o.length-1),s=s.substr(0,s.length-1),u=o):u=u.substr(0,u.length-1),r=a.closeIndex;else if(this.options.unpairedTags.indexOf(o)!==-1)r=a.closeIndex;else{const I=this.readStopNodeData(t,l,c+1);if(!I)throw new Error(`Unexpected end of ${l}`);r=I.i,v=I.tagContent}const N=new z(o);o!==u&&d&&(N[":@"]=this.buildAttributesMap(u,s,o)),v&&(v=this.parseTextData(v,o,s,!0,d,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),N.add(this.options.textNodeName,v),this.addChild(n,N,s,h)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){o[o.length-1]==="/"?(o=o.substr(0,o.length-1),s=s.substr(0,s.length-1),u=o):u=u.substr(0,u.length-1),this.options.transformTagName&&(o=this.options.transformTagName(o));const v=new z(o);o!==u&&d&&(v[":@"]=this.buildAttributesMap(u,s,o)),this.addChild(n,v,s,h),s=s.substr(0,s.lastIndexOf("."))}else{const v=new z(o);this.tagsNodeStack.push(n),o!==u&&d&&(v[":@"]=this.buildAttributesMap(u,s,o)),this.addChild(n,v,s,h),n=v}i="",r=c}}else i+=t[r];return e.child};function un(t,e,n,i){this.options.captureMetaData||(i=void 0);const s=this.options.updateTag(e.tagname,n,e[":@"]);s===!1||(typeof s=="string"&&(e.tagname=s),t.addChild(e,i))}const ln=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const n=this.docTypeEntities[e];t=t.replace(n.regx,n.val)}for(let e in this.lastEntities){const n=this.lastEntities[e];t=t.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const n=this.htmlEntities[e];t=t.replace(n.regex,n.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function cn(t,e,n,i){return t&&(i===void 0&&(i=e.child.length===0),t=this.parseTextData(t,e.tagname,n,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,i),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function dn(t,e,n){const i="*."+n;for(const s in t){const r=t[s];if(i===r||e===r)return!0}return!1}function hn(t,e,n=">"){let i,s="";for(let r=e;r<t.length;r++){let f=t[r];if(i)f===i&&(i="");else if(f==='"'||f==="'")i=f;else if(f===n[0])if(n[1]){if(t[r+1]===n[1])return{data:s,index:r}}else return{data:s,index:r};else f==="	"&&(f=" ");s+=f}}function K(t,e,n,i){const s=t.indexOf(e,n);if(s===-1)throw new Error(i);return s+e.length-1}function ve(t,e,n,i=">"){const s=hn(t,e+1,i);if(!s)return;let r=s.data;const f=s.index,a=r.search(/\s/);let o=r,l=!0;a!==-1&&(o=r.substring(0,a),r=r.substring(a+1).trimStart());const u=o;if(n){const d=o.indexOf(":");d!==-1&&(o=o.substr(d+1),l=o!==s.data.substr(d+1))}return{tagName:o,tagExp:r,closeIndex:f,attrExpPresent:l,rawTagName:u}}function gn(t,e,n){const i=n;let s=1;for(;n<t.length;n++)if(t[n]==="<")if(t[n+1]==="/"){const r=K(t,">",n,`${e} is not closed`);if(t.substring(n+2,r).trim()===e&&(s--,s===0))return{tagContent:t.substring(i,n),i:r};n=r}else if(t[n+1]==="?")n=K(t,"?>",n+1,"StopNode is not closed.");else if(t.substr(n+1,3)==="!--")n=K(t,"-->",n+3,"StopNode is not closed.");else if(t.substr(n+1,2)==="![")n=K(t,"]]>",n,"StopNode is not closed.")-2;else{const r=ve(t,n,">");r&&((r&&r.tagName)===e&&r.tagExp[r.tagExp.length-1]!=="/"&&s++,n=r.closeIndex)}}function Ne(t,e,n){if(e&&typeof t=="string"){const i=t.trim();return i==="true"?!0:i==="false"?!1:Qt(t,n)}else return It(t)?t:""}const ge=z.getMetaDataSymbol();function pn(t,e){return Ge(t,e)}function Ge(t,e,n){let i;const s={};for(let r=0;r<t.length;r++){const f=t[r],a=vn(f);let o="";if(n===void 0?o=a:o=n+"."+a,a===e.textNodeName)i===void 0?i=f[a]:i+=""+f[a];else{if(a===void 0)continue;if(f[a]){let l=Ge(f[a],e,o);const u=bn(l,e);f[ge]!==void 0&&(l[ge]=f[ge]),f[":@"]?Nn(l,f[":@"],o,e):Object.keys(l).length===1&&l[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?l=l[e.textNodeName]:Object.keys(l).length===0&&(e.alwaysCreateTextNode?l[e.textNodeName]="":l=""),s[a]!==void 0&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(l)):e.isArray(a,o,u)?s[a]=[l]:s[a]=l}}}return typeof i=="string"?i.length>0&&(s[e.textNodeName]=i):i!==void 0&&(s[e.textNodeName]=i),s}function vn(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const i=e[n];if(i!==":@")return i}}function Nn(t,e,n,i){if(e){const s=Object.keys(e),r=s.length;for(let f=0;f<r;f++){const a=s[f];i.isArray(a,n+"."+a,!0,!0)?t[a]=[e[a]]:t[a]=e[a]}}}function bn(t,e){const{textNodeName:n}=e,i=Object.keys(t).length;return!!(i===0||i===1&&(t[n]||typeof t[n]=="boolean"||t[n]===0))}class En{constructor(e){this.externalEntities={},this.options=Rt(e)}parse(e,n){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});const r=Pt(e,n);if(r!==!0)throw Error(`${r.err.msg}:${r.err.line}:${r.err.col}`)}const i=new tn(this.options);i.addExternalEntities(this.externalEntities);const s=i.parseXml(e);return this.options.preserveOrder||s===void 0?s:pn(s,this.options)}addEntity(e,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=n}static getMetaDataSymbol(){return z.getMetaDataSymbol()}}const wn=`
`;function Tn(t,e){let n="";return e.format&&e.indentBy.length>0&&(n=wn),Je(t,e,"",n)}function Je(t,e,n,i){let s="",r=!1;for(let f=0;f<t.length;f++){const a=t[f],o=yn(a);if(o===void 0)continue;let l="";if(n.length===0?l=o:l=`${n}.${o}`,o===e.textNodeName){let h=a[o];_n(l,e)||(h=e.tagValueProcessor(o,h),h=Ze(h,e)),r&&(s+=i),s+=h,r=!1;continue}else if(o===e.cdataPropName){r&&(s+=i),s+=`<![CDATA[${a[o][0][e.textNodeName]}]]>`,r=!1;continue}else if(o===e.commentPropName){s+=i+`<!--${a[o][0][e.textNodeName]}-->`,r=!0;continue}else if(o[0]==="?"){const h=ke(a[":@"],e),v=o==="?xml"?"":i;let N=a[o][0][e.textNodeName];N=N.length!==0?" "+N:"",s+=v+`<${o}${N}${h}?>`,r=!0;continue}let u=i;u!==""&&(u+=e.indentBy);const d=ke(a[":@"],e),c=i+`<${o}${d}`,g=Je(a[o],e,l,u);e.unpairedTags.indexOf(o)!==-1?e.suppressUnpairedNode?s+=c+">":s+=c+"/>":(!g||g.length===0)&&e.suppressEmptyNode?s+=c+"/>":g&&g.endsWith(">")?s+=c+`>${g}${i}</${o}>`:(s+=c+">",g&&i!==""&&(g.includes("/>")||g.includes("</"))?s+=i+e.indentBy+g+i:s+=g,s+=`</${o}>`),r=!0}return s}function yn(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const i=e[n];if(t.hasOwnProperty(i)&&i!==":@")return i}}function ke(t,e){let n="";if(t&&!e.ignoreAttributes)for(let i in t){if(!t.hasOwnProperty(i))continue;let s=e.attributeValueProcessor(i,t[i]);s=Ze(s,e),s===!0&&e.suppressBooleanAttributes?n+=` ${i.substr(e.attributeNamePrefix.length)}`:n+=` ${i.substr(e.attributeNamePrefix.length)}="${s}"`}return n}function _n(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let n=t.substr(t.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===t||e.stopNodes[i]==="*."+n)return!0;return!1}function Ze(t,e){if(t&&t.length>0&&e.processEntities)for(let n=0;n<e.entities.length;n++){const i=e.entities[n];t=t.replace(i.regex,i.val)}return t}const An={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function q(t){this.options=Object.assign({},An,t),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=Ue(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Pn),this.processTextOrObjNode=In,this.options.format?(this.indentate=mn,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}q.prototype.build=function(t){return this.options.preserveOrder?Tn(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0,[]).val)};q.prototype.j2x=function(t,e,n){let i="",s="";const r=n.join(".");for(let f in t)if(Object.prototype.hasOwnProperty.call(t,f))if(typeof t[f]>"u")this.isAttribute(f)&&(s+="");else if(t[f]===null)this.isAttribute(f)||f===this.options.cdataPropName?s+="":f[0]==="?"?s+=this.indentate(e)+"<"+f+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+f+"/"+this.tagEndChar;else if(t[f]instanceof Date)s+=this.buildTextValNode(t[f],f,"",e);else if(typeof t[f]!="object"){const a=this.isAttribute(f);if(a&&!this.ignoreAttributesFn(a,r))i+=this.buildAttrPairStr(a,""+t[f]);else if(!a)if(f===this.options.textNodeName){let o=this.options.tagValueProcessor(f,""+t[f]);s+=this.replaceEntitiesValue(o)}else s+=this.buildTextValNode(t[f],f,"",e)}else if(Array.isArray(t[f])){const a=t[f].length;let o="",l="";for(let u=0;u<a;u++){const d=t[f][u];if(!(typeof d>"u"))if(d===null)f[0]==="?"?s+=this.indentate(e)+"<"+f+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+f+"/"+this.tagEndChar;else if(typeof d=="object")if(this.options.oneListGroup){const c=this.j2x(d,e+1,n.concat(f));o+=c.val,this.options.attributesGroupName&&d.hasOwnProperty(this.options.attributesGroupName)&&(l+=c.attrStr)}else o+=this.processTextOrObjNode(d,f,e,n);else if(this.options.oneListGroup){let c=this.options.tagValueProcessor(f,d);c=this.replaceEntitiesValue(c),o+=c}else o+=this.buildTextValNode(d,f,"",e)}this.options.oneListGroup&&(o=this.buildObjectNode(o,f,l,e)),s+=o}else if(this.options.attributesGroupName&&f===this.options.attributesGroupName){const a=Object.keys(t[f]),o=a.length;for(let l=0;l<o;l++)i+=this.buildAttrPairStr(a[l],""+t[f][a[l]])}else s+=this.processTextOrObjNode(t[f],f,e,n);return{attrStr:i,val:s}};q.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function In(t,e,n,i){const s=this.j2x(t,n+1,i.concat(e));return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,s.attrStr,n):this.buildObjectNode(s.val,e,s.attrStr,n)}q.prototype.buildObjectNode=function(t,e,n,i){if(t==="")return e[0]==="?"?this.indentate(i)+"<"+e+n+"?"+this.tagEndChar:this.indentate(i)+"<"+e+n+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,r="";return e[0]==="?"&&(r="?",s=""),(n||n==="")&&t.indexOf("<")===-1?this.indentate(i)+"<"+e+n+r+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&r.length===0?this.indentate(i)+`<!--${t}-->`+this.newLine:this.indentate(i)+"<"+e+n+r+this.tagEndChar+t+this.indentate(i)+s}};q.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};q.prototype.buildTextValNode=function(t,e,n,i){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(i)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(i)+"<"+e+n+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""?this.indentate(i)+"<"+e+n+this.closeTag(e)+this.tagEndChar:this.indentate(i)+"<"+e+n+">"+s+"</"+e+this.tagEndChar}};q.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const n=this.options.entities[e];t=t.replace(n.regex,n.val)}return t};function mn(t){return this.options.indentBy.repeat(t)}function Pn(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}var Cn=R('<h2 class="svelte-n7vocc">Cultural Reference</h2>'),On=R('<h2 class="svelte-n7vocc">Editorial Commentary:</h2>'),xn=R('<li class="svelte-n7vocc"> </li>'),Sn=R('<h2 class="svelte-n7vocc">Collation:</h2> <ul class="svelte-n7vocc"></ul>',1),Vn=R('<h2 class="svelte-n7vocc">Other Notes:</h2>'),kn=R('<p class="svelte-n7vocc"> </p>'),Mn=R("<!> <!>",1),Ln=R('<div class="svelte-n7vocc"><h1 class="svelte-n7vocc">Notes:</h1> <!></div>');function Fn(t,e){we(e,!0);let n=pt(e,"internalRef",15),i=Q(pe(new Array));e.noteData.forEach(a=>{a.type=="collation"&&(G(i,JSON.parse(a.text),!0),a.text="")});var s=He(),r=se(s);{var f=a=>{var o=Ln(),l=U(F(o),2);fe(l,17,()=>e.noteData,ae,(u,d)=>{var c=Mn(),g=se(c);{var h=T=>{var y=Cn();k(T,y)},v=(T,y)=>{{var p=$=>{var X=On();k($,X)},b=($,X)=>{{var _=w=>{var A=Sn(),m=U(se(A),2);fe(m,21,()=>E(i),ae,(x,S)=>{var B=xn(),M=F(B,!0);O(B),ee(()=>j(M,E(S).item[0]["#text"])),k(x,B)}),O(m),k(w,A)},C=w=>{var A=Vn();k(w,A)};W($,w=>{E(d).type==="collation"?w(_):w(C,!1)},X)}};W(T,$=>{E(d).type==="e"?$(p):$(b,!1)},y)}};W(g,T=>{E(d).type==="culture"?T(h):T(v,!1)})}var N=U(g,2);{var I=T=>{var y=kn(),p=F(y,!0);O(y),ee(()=>j(p,E(d).text)),k(T,y)};W(N,T=>{T(I)})}k(u,c)}),O(o),vt(o,u=>n(u),()=>n()),ee(()=>Tt(o,`left: ${e.positionX??""}px; top: ${e.positionY??""}px;`)),k(a,o)};W(r,a=>{e.visible==!0&&a(f)})}k(t,s),Te()}function Rn(t,e,n,i){const{clientX:s,clientY:r}=t;console.log("here"),G(e,!0),G(n,s,!0),G(i,r,!0),t.stopPropagation()}var Bn=R('<p class="svelte-m66nwu"> </p>'),$n=R('<h3 class="svelte-m66nwu"> </h3>'),Xn=R("<!> <!>",1);function Yn(t,e){we(e,!0);let n=Q(!1),i=Q(0),s=Q(0),r=Q(void 0);async function f(c){await dt(),E(r)!=null&&E(n)==!0&&(E(r).contains(c.target)||(console.log("clicked outside"),G(n,!1)))}var a=Xn();ht("click",ct,f);var o=se(a);{var l=c=>{var g=Bn();g.__click=[Rn,n,i,s];var h=F(g,!0);O(g),ee(()=>j(h,e.pageData.text)),k(c,g)},u=(c,g)=>{{var h=v=>{var N=$n(),I=F(N,!0);O(N),ee(()=>j(I,e.pageData.text)),k(v,N)};W(c,v=>{e.pageData.type==="head"&&v(h)},g)}};W(o,c=>{e.pageData.type==="p"?c(l):c(u,!1)})}var d=U(o,2);Fn(d,{get noteData(){return e.pageData.notes},get positionX(){return E(i)},get positionY(){return E(s)},get visible(){return E(n)},get internalRef(){return E(r)},set internalRef(c){G(r,c,!0)}}),k(t,a),Te()}Be(["click"]);function Un(t,e){G(e,E(e)-2),Math.min(Math.max(E(e),0),12)}function Gn(t,e){G(e,E(e)+2),Math.min(Math.max(E(e),0),12)}var Jn=R('<div class="page svelte-1k6udiw"></div>'),Zn=R('<div class="book_container svelte-1k6udiw"><div class="header_container svelte-1k6udiw"><h1 class="svelte-1k6udiw"> </h1></div> <div class="book svelte-1k6udiw"></div> <div class="footer_container svelte-1k6udiw"><p class="svelte-1k6udiw"> </p><p class="svelte-1k6udiw"> </p></div></div> <div class="meta_container svelte-1k6udiw"><div class="page_turn_buttons_container svelte-1k6udiw"><button class="svelte-1k6udiw">Previous Page</button><button class="svelte-1k6udiw">Next Page</button></div></div>',1);function Hn(t,e){we(e,!0);const n={preserveOrder:!0,ignoreAttributes:!1},i=new En(n);new q;let s=Q(pe(new Array)),r=pe(new Array),f=Q(0);function a(_,C){var x,S,B;let w=[];if(_){for(const M of _){const L=Object.keys(M)[0],D=(x=M[L])==null?void 0:x[0];var A=new Array,m=new Array;if(C==!0&&(((S=M[L][1])==null?void 0:S.note)!=null&&(A=(B=M[L][1])==null?void 0:B.note),A=M[L].filter(J=>"note"in J).map(J=>J),m=A.map(J=>J[":@"]["@_type"]),console.log(JSON.stringify(m))),L==="pb")r.push(w),w=[];else{const J=typeof D=="object"&&"#text"in D?String(D["#text"]):"";if(C==!0){let ie=new Array;A.length!=0&&(ie=A.map((te,le)=>m[le]=="collation"?JSON.stringify(te.note[0].list):te.note[0]["#text"]).map((te,le)=>(console.log(te),{type:m[le],text:te}))),w.push({type:L,text:J,notes:ie})}else{let ie=new Array;w.push({type:L,text:J,notes:ie})}}}r.push(w)}}gt(async()=>{var C,w,A,m,x,S,B,M,L;const _=await fetch("joyce.xml");G(s,i.parse(await _.text()),!0),a((A=(w=(C=E(s)[4])==null?void 0:C.TEI[1])==null?void 0:w.text[0])==null?void 0:A.front,!0),a((S=(x=(m=E(s)[4])==null?void 0:m.TEI[1])==null?void 0:x.text[1])==null?void 0:S.body,!0),a((L=(M=(B=E(s)[4])==null?void 0:B.TEI[1])==null?void 0:M.text[2])==null?void 0:L.back,!1)});function o(_,C){var w={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},A="";if(_-C>0)return String(_-C);var m=Math.abs(_-C);for(var x of Object.keys(w)){var S=Math.floor(m/w[x]);m-=S*w[x],A+=x.repeat(S)}return A}var l=Zn(),u=se(l),d=F(u),c=F(d),g=F(c);O(c),O(d);var h=U(d,2);fe(h,21,()=>r.slice(E(f),E(f)+2),ae,(_,C,w,A)=>{var m=Jn();fe(m,21,()=>E(C),ae,(x,S)=>{Yn(x,{get pageData(){return E(S)}})}),O(m),k(_,m)}),O(h);var v=U(h,2),N=F(v),I=F(N,!0);O(N);var T=U(N),y=F(T,!0);O(T),O(v),O(u);var p=U(u,2),b=F(p),$=F(b);$.__click=[Un,f];var X=U($);X.__click=[Gn,f],O(b),O(p),ee((_,C)=>{var w;j(g,`${((w=E(s)[4])==null?void 0:w.TEI[0].teiHeader[0].fileDesc[0].titleStmt[0].title[0]["#text"])??""} by James Joyce`),j(I,_),j(y,C)},[()=>o(E(f),8),()=>o(E(f)+1,8)]),k(t,l),Te()}Be(["click"]);function tr(t){Hn(t,{})}export{tr as component};
