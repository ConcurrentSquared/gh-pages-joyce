import{c as Je,a as V,t as F}from"../chunks/NO-mRj0K.js";import"../chunks/PIshycqp.js";import{af as He,b as Ze,B as le,h as Y,a6 as qe,y as We,k as E,N as ze,z as Qe,A as we,C as ue,g as ee,a9 as Ke,D as ke,d as Ve,F as je,an as ce,ad as Me,a1 as _e,ao as Ae,T as De,ap as Ie,aq as ve,ar as et,ac as tt,as as nt,f as st,at as Ne,au as rt,a7 as it,a3 as ot,av as Le,J as at,aw as ft,q as be,ak as J,Q as he,R as X,i as ne,s as Ee,x as U,v as L,w as O,t as j,ax as lt,al as ut}from"../chunks/n40Usgcr.js";import{s as Q,d as Fe,e as ct}from"../chunks/CYHEETAa.js";import{o as dt}from"../chunks/Crg0E7TV.js";import{p as ht,i as q,b as gt}from"../chunks/Bt2V4Niv.js";import"../chunks/CI3yuqP5.js";function ie(t,e){return e}function pt(t,e,n,i){for(var r=[],s=e.length,a=0;a<s;a++)et(e[a].e,r,!0);var f=s>0&&r.length===0&&n!==null;if(f){var o=n.parentNode;tt(o),o.append(n),i.clear(),G(t,e[0].prev,e[s-1].next)}nt(r,()=>{for(var l=0;l<s;l++){var u=e[l];f||(i.delete(u.k),G(t,u.prev,u.next)),st(u.e,!f)}})}function oe(t,e,n,i,r,s=null){var a=t,f={flags:e,items:new Map,first:null},o=(e&Le)!==0;if(o){var l=t;a=Y?le(qe(l)):l.appendChild(He())}Y&&We();var u=null,d=!1,c=ze(()=>{var g=n();return ot(g)?g:g==null?[]:Me(g)});Ze(()=>{var g=E(c),h=g.length;if(d&&h===0)return;d=h===0;let v=!1;if(Y){var N=a.data===Qe;N!==(h===0)&&(a=we(),le(a),ue(!1),v=!0)}if(Y){for(var A=null,S,T=0;T<h;T++){if(ee.nodeType===8&&ee.data===Ke){a=ee,v=!0,ue(!1);break}var p=g[T],b=i(p,T);S=Re(ee,f,A,null,p,b,T,r,e,n),f.items.set(b,S),A=S}h>0&&le(we())}Y||vt(g,f,a,r,e,i,n),s!==null&&(h===0?u?ke(u):u=Ve(()=>s(a)):u!==null&&je(u,()=>{u=null})),v&&ue(!0),E(c)}),Y&&(a=ee)}function vt(t,e,n,i,r,s,a){var k,B,R,$;var f=(r&ft)!==0,o=(r&(Ne|ve))!==0,l=t.length,u=e.items,d=e.first,c=d,g,h=null,v,N=[],A=[],S,T,p,b;if(f)for(b=0;b<l;b+=1)S=t[b],T=s(S,b),p=u.get(T),p!==void 0&&((k=p.a)==null||k.measure(),(v??(v=new Set)).add(p));for(b=0;b<l;b+=1){if(S=t[b],T=s(S,b),p=u.get(T),p===void 0){var K=c?c.e.nodes_start:n;h=Re(K,e,h,h===null?e.first:h.next,S,T,b,i,r,a),u.set(T,h),N=[],A=[],c=h.next;continue}if(o&&Nt(p,S,b,r),(p.e.f&ce)!==0&&(ke(p.e),f&&((B=p.a)==null||B.unfix(),(v??(v=new Set)).delete(p))),p!==c){if(g!==void 0&&g.has(p)){if(N.length<A.length){var M=A[0],y;h=M.prev;var m=N[0],_=N[N.length-1];for(y=0;y<N.length;y+=1)me(N[y],M,n);for(y=0;y<A.length;y+=1)g.delete(A[y]);G(e,m.prev,_.next),G(e,h,m),G(e,_,M),c=M,h=_,b-=1,N=[],A=[]}else g.delete(p),me(p,c,n),G(e,p.prev,p.next),G(e,p,h===null?e.first:h.next),G(e,h,p),h=p;continue}for(N=[],A=[];c!==null&&c.k!==T;)(c.e.f&ce)===0&&(g??(g=new Set)).add(c),A.push(c),c=c.next;if(c===null)continue;p=c}N.push(p),h=p,c=p.next}if(c!==null||g!==void 0){for(var w=g===void 0?[]:Me(g);c!==null;)(c.e.f&ce)===0&&w.push(c),c=c.next;var P=w.length;if(P>0){var C=(r&Le)!==0&&l===0?n:null;if(f){for(b=0;b<P;b+=1)(R=w[b].a)==null||R.measure();for(b=0;b<P;b+=1)($=w[b].a)==null||$.fix()}pt(e,w,C,u)}}f&&at(()=>{var D;if(v!==void 0)for(p of v)(D=p.a)==null||D.apply()}),_e.first=e.first&&e.first.e,_e.last=h&&h.e}function Nt(t,e,n,i){(i&Ne)!==0&&Ae(t.v,e),(i&ve)!==0?Ae(t.i,n):t.i=n}function Re(t,e,n,i,r,s,a,f,o,l){var u=(o&Ne)!==0,d=(o&rt)===0,c=u?d?De(r):Ie(r):r,g=(o&ve)===0?a:Ie(a),h={i:g,v:c,k:s,a:null,e:null,prev:n,next:i};try{return h.e=Ve(()=>f(t,c,g,l),Y),h.e.prev=n&&n.e,h.e.next=i&&i.e,n===null?e.first=h:(n.next=h,n.e.next=h.e),i!==null&&(i.prev=h,i.e.prev=h.e),h}finally{}}function me(t,e,n){for(var i=t.next?t.next.e.nodes_start:n,r=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==i;){var a=it(s);r.before(s),s=a}}function G(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function bt(t,e){return t==null?null:String(t)}function Et(t,e,n,i){var r=t.__style;if(Y||r!==e){var s=bt(e);(!Y||s!==t.getAttribute("style"))&&(s==null?t.removeAttribute("style"):t.style.cssText=s),t.__style=e}return i}const Be=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Tt=Be+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",yt="["+Be+"]["+Tt+"]*",wt=new RegExp("^"+yt+"$");function $e(t,e){const n=[];let i=e.exec(t);for(;i;){const r=[];r.startIndex=e.lastIndex-i[0].length;const s=i.length;for(let a=0;a<s;a++)r.push(i[a]);n.push(r),i=e.exec(t)}return n}const Te=function(t){const e=wt.exec(t);return!(e===null||typeof e>"u")};function _t(t){return typeof t<"u"}const At={allowBooleanAttributes:!1,unpairedTags:[]};function It(t,e){e=Object.assign({},At,e);const n=[];let i=!1,r=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let s=0;s<t.length;s++)if(t[s]==="<"&&t[s+1]==="?"){if(s+=2,s=Ce(t,s),s.err)return s}else if(t[s]==="<"){let a=s;if(s++,t[s]==="!"){s=Oe(t,s);continue}else{let f=!1;t[s]==="/"&&(f=!0,s++);let o="";for(;s<t.length&&t[s]!==">"&&t[s]!==" "&&t[s]!=="	"&&t[s]!==`
`&&t[s]!=="\r";s++)o+=t[s];if(o=o.trim(),o[o.length-1]==="/"&&(o=o.substring(0,o.length-1),s--),!Vt(o)){let d;return o.trim().length===0?d="Invalid space after '<'.":d="Tag '"+o+"' is an invalid name.",I("InvalidTag",d,x(t,s))}const l=Ct(t,s);if(l===!1)return I("InvalidAttr","Attributes for '"+o+"' have open quote.",x(t,s));let u=l.value;if(s=l.index,u[u.length-1]==="/"){const d=s-u.length;u=u.substring(0,u.length-1);const c=Se(u,e);if(c===!0)i=!0;else return I(c.err.code,c.err.msg,x(t,d+c.err.line))}else if(f)if(l.tagClosed){if(u.trim().length>0)return I("InvalidTag","Closing tag '"+o+"' can't have attributes or invalid starting.",x(t,a));if(n.length===0)return I("InvalidTag","Closing tag '"+o+"' has not been opened.",x(t,a));{const d=n.pop();if(o!==d.tagName){let c=x(t,d.tagStartPos);return I("InvalidTag","Expected closing tag '"+d.tagName+"' (opened in line "+c.line+", col "+c.col+") instead of closing tag '"+o+"'.",x(t,a))}n.length==0&&(r=!0)}}else return I("InvalidTag","Closing tag '"+o+"' doesn't have proper closing.",x(t,s));else{const d=Se(u,e);if(d!==!0)return I(d.err.code,d.err.msg,x(t,s-u.length+d.err.line));if(r===!0)return I("InvalidXml","Multiple possible root nodes found.",x(t,s));e.unpairedTags.indexOf(o)!==-1||n.push({tagName:o,tagStartPos:a}),i=!0}for(s++;s<t.length;s++)if(t[s]==="<")if(t[s+1]==="!"){s++,s=Oe(t,s);continue}else if(t[s+1]==="?"){if(s=Ce(t,++s),s.err)return s}else break;else if(t[s]==="&"){const d=xt(t,s);if(d==-1)return I("InvalidChar","char '&' is not expected.",x(t,s));s=d}else if(r===!0&&!Pe(t[s]))return I("InvalidXml","Extra text at the end",x(t,s));t[s]==="<"&&s--}}else{if(Pe(t[s]))continue;return I("InvalidChar","char '"+t[s]+"' is not expected.",x(t,s))}if(i){if(n.length==1)return I("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",x(t,n[0].tagStartPos));if(n.length>0)return I("InvalidXml","Invalid '"+JSON.stringify(n.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return I("InvalidXml","Start tag expected.",1);return!0}function Pe(t){return t===" "||t==="	"||t===`
`||t==="\r"}function Ce(t,e){const n=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const i=t.substr(n,e-n);if(e>5&&i==="xml")return I("InvalidXml","XML declaration allowed only at the start of the document.",x(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function Oe(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let n=1;for(e+=8;e<t.length;e++)if(t[e]==="<")n++;else if(t[e]===">"&&(n--,n===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const mt='"',Pt="'";function Ct(t,e){let n="",i="",r=!1;for(;e<t.length;e++){if(t[e]===mt||t[e]===Pt)i===""?i=t[e]:i!==t[e]||(i="");else if(t[e]===">"&&i===""){r=!0;break}n+=t[e]}return i!==""?!1:{value:n,index:e,tagClosed:r}}const Ot=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Se(t,e){const n=$e(t,Ot),i={};for(let r=0;r<n.length;r++){if(n[r][1].length===0)return I("InvalidAttr","Attribute '"+n[r][2]+"' has no space in starting.",te(n[r]));if(n[r][3]!==void 0&&n[r][4]===void 0)return I("InvalidAttr","Attribute '"+n[r][2]+"' is without value.",te(n[r]));if(n[r][3]===void 0&&!e.allowBooleanAttributes)return I("InvalidAttr","boolean attribute '"+n[r][2]+"' is not allowed.",te(n[r]));const s=n[r][2];if(!kt(s))return I("InvalidAttr","Attribute '"+s+"' is an invalid name.",te(n[r]));if(!i.hasOwnProperty(s))i[s]=1;else return I("InvalidAttr","Attribute '"+s+"' is repeated.",te(n[r]))}return!0}function St(t,e){let n=/\d/;for(t[e]==="x"&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(n))break}return-1}function xt(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,St(t,e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(t[e]===";")break;return-1}return e}function I(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function kt(t){return Te(t)}function Vt(t){return Te(t)}function x(t,e){const n=t.substring(0,e).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function te(t){return t.startIndex+t[1].length}const Mt={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,n){return t},captureMetaData:!1},Lt=function(t){return Object.assign({},Mt,t)};let ae;typeof Symbol!="function"?ae="@@xmlMetadata":ae=Symbol("XML Node Metadata");class W{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,n){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:n})}addChild(e,n){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),n!==void 0&&(this.child[this.child.length-1][ae]={startIndex:n})}static getMetaDataSymbol(){return ae}}function Ft(t,e){const n={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let i=1,r=!1,s=!1,a="";for(;e<t.length;e++)if(t[e]==="<"&&!s){if(r&&Yt(t,e)){e+=7;let f,o;[f,o,e]=Rt(t,e+1),o.indexOf("&")===-1&&(n[f]={regx:RegExp(`&${f};`,"g"),val:o})}else if(r&&Ut(t,e)){e+=8;const{index:f}=$t(t,e+1);e=f}else if(r&&Gt(t,e))e+=8;else if(r&&Jt(t,e)){e+=9;const{index:f}=Bt(t,e+1);e=f}else if(Xt)s=!0;else throw new Error("Invalid DOCTYPE");i++,a=""}else if(t[e]===">"){if(s?t[e-1]==="-"&&t[e-2]==="-"&&(s=!1,i--):i--,i===0)break}else t[e]==="["?r=!0:a+=t[e];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:e}}const H=(t,e)=>{for(;e<t.length&&/\s/.test(t[e]);)e++;return e};function Rt(t,e){e=H(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e])&&t[e]!=='"'&&t[e]!=="'";)n+=t[e],e++;if(ye(n),e=H(t,e),t.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(t[e]==="%")throw new Error("Parameter entities are not supported");let i="";return[e,i]=re(t,e,"entity"),e--,[n,i,e]}function Bt(t,e){e=H(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;ye(n),e=H(t,e);const i=t.substring(e,e+6).toUpperCase();if(i!=="SYSTEM"&&i!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${i}"`);e+=i.length,e=H(t,e);let r=null,s=null;if(i==="PUBLIC")[e,r]=re(t,e,"publicIdentifier"),e=H(t,e),(t[e]==='"'||t[e]==="'")&&([e,s]=re(t,e,"systemIdentifier"));else if(i==="SYSTEM"&&([e,s]=re(t,e,"systemIdentifier"),!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:n,publicIdentifier:r,systemIdentifier:s,index:--e}}function re(t,e,n){let i="";const r=t[e];if(r!=='"'&&r!=="'")throw new Error(`Expected quoted string, found "${r}"`);for(e++;e<t.length&&t[e]!==r;)i+=t[e],e++;if(t[e]!==r)throw new Error(`Unterminated ${n} value`);return e++,[e,i]}function $t(t,e){e=H(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;if(!ye(n))throw new Error(`Invalid element name: "${n}"`);if(e=H(t,e),t[e]!=="(")throw new Error(`Expected '(', found "${t[e]}"`);e++;let i="";for(;e<t.length&&t[e]!==")";)i+=t[e],e++;if(t[e]!==")")throw new Error("Unterminated content model");return{elementName:n,contentModel:i.trim(),index:e}}function Xt(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function Yt(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function Ut(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function Gt(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function Jt(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function ye(t){if(Te(t))return t;throw new Error(`Invalid entity name ${t}`)}const Ht=/^[-+]?0x[a-fA-F0-9]+$/,Zt=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,qt={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Wt(t,e={}){if(e=Object.assign({},qt,e),!t||typeof t!="string")return t;let n=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(n))return t;if(t==="0")return 0;if(e.hex&&Ht.test(n))return jt(n,16);if(n.search(/.+[eE].+/)!==-1)return Qt(t,n,e);{const i=Zt.exec(n);if(i){const r=i[1]||"",s=i[2];let a=Kt(i[3]);const f=r?t[s.length+1]===".":t[s.length]===".";if(!e.leadingZeros&&(s.length>1||s.length===1&&!f))return t;{const o=Number(n),l=String(o);if(o===0||o===-0)return o;if(l.search(/[eE]/)!==-1)return e.eNotation?o:t;if(n.indexOf(".")!==-1)return l==="0"||l===a||l===`${r}${a}`?o:t;let u=s?a:n;return s?u===l||r+u===l?o:t:u===l||u===r+l?o:t}}else return t}}const zt=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Qt(t,e,n){if(!n.eNotation)return t;const i=e.match(zt);if(i){let r=i[1]||"";const s=i[3].indexOf("e")===-1?"E":"e",a=i[2],f=r?t[a.length+1]===s:t[a.length]===s;return a.length>1&&f?t:a.length===1&&(i[3].startsWith(`.${s}`)||i[3][0]===s)?Number(e):n.leadingZeros&&!f?(e=(i[1]||"")+i[3],Number(e)):t}else return t}function Kt(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substring(0,t.length-1))),t}function jt(t,e){if(parseInt)return parseInt(t,e);if(Number.parseInt)return Number.parseInt(t,e);if(window&&window.parseInt)return window.parseInt(t,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function Xe(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(const n of t)if(typeof n=="string"&&e===n||n instanceof RegExp&&n.test(e))return!0}:()=>!1}class Dt{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(n,i)=>String.fromCodePoint(Number.parseInt(i,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(n,i)=>String.fromCodePoint(Number.parseInt(i,16))}},this.addExternalEntities=en,this.parseXml=on,this.parseTextData=tn,this.resolveNameSpace=nn,this.buildAttributesMap=rn,this.isItStopNode=un,this.replaceEntitiesValue=fn,this.readStopNodeData=dn,this.saveTextToParentTag=ln,this.addChild=an,this.ignoreAttributesFn=Xe(this.options.ignoreAttributes)}}function en(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const i=e[n];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:t[i]}}}function tn(t,e,n,i,r,s,a){if(t!==void 0&&(this.options.trimValues&&!i&&(t=t.trim()),t.length>0)){a||(t=this.replaceEntitiesValue(t));const f=this.options.tagValueProcessor(e,t,n,r,s);return f==null?t:typeof f!=typeof t||f!==t?f:this.options.trimValues?pe(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?pe(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function nn(t){if(this.options.removeNSPrefix){const e=t.split(":"),n=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=n+e[1])}return t}const sn=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function rn(t,e,n){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const i=$e(t,sn),r=i.length,s={};for(let a=0;a<r;a++){const f=this.resolveNameSpace(i[a][1]);if(this.ignoreAttributesFn(f,e))continue;let o=i[a][4],l=this.options.attributeNamePrefix+f;if(f.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),o!==void 0){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);const u=this.options.attributeValueProcessor(f,o,e);u==null?s[l]=o:typeof u!=typeof o||u!==o?s[l]=u:s[l]=pe(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[l]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const a={};return a[this.options.attributesGroupName]=s,a}return s}}const on=function(t){t=t.replace(/\r\n?/g,`
`);const e=new W("!xml");let n=e,i="",r="";for(let s=0;s<t.length;s++)if(t[s]==="<")if(t[s+1]==="/"){const f=z(t,">",s,"Closing Tag is not closed.");let o=t.substring(s+2,f).trim();if(this.options.removeNSPrefix){const d=o.indexOf(":");d!==-1&&(o=o.substr(d+1))}this.options.transformTagName&&(o=this.options.transformTagName(o)),n&&(i=this.saveTextToParentTag(i,n,r));const l=r.substring(r.lastIndexOf(".")+1);if(o&&this.options.unpairedTags.indexOf(o)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${o}>`);let u=0;l&&this.options.unpairedTags.indexOf(l)!==-1?(u=r.lastIndexOf(".",r.lastIndexOf(".")-1),this.tagsNodeStack.pop()):u=r.lastIndexOf("."),r=r.substring(0,u),n=this.tagsNodeStack.pop(),i="",s=f}else if(t[s+1]==="?"){let f=ge(t,s,!1,"?>");if(!f)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,n,r),!(this.options.ignoreDeclaration&&f.tagName==="?xml"||this.options.ignorePiTags)){const o=new W(f.tagName);o.add(this.options.textNodeName,""),f.tagName!==f.tagExp&&f.attrExpPresent&&(o[":@"]=this.buildAttributesMap(f.tagExp,r,f.tagName)),this.addChild(n,o,r,s)}s=f.closeIndex+1}else if(t.substr(s+1,3)==="!--"){const f=z(t,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){const o=t.substring(s+4,f-2);i=this.saveTextToParentTag(i,n,r),n.add(this.options.commentPropName,[{[this.options.textNodeName]:o}])}s=f}else if(t.substr(s+1,2)==="!D"){const f=Ft(t,s);this.docTypeEntities=f.entities,s=f.i}else if(t.substr(s+1,2)==="!["){const f=z(t,"]]>",s,"CDATA is not closed.")-2,o=t.substring(s+9,f);i=this.saveTextToParentTag(i,n,r);let l=this.parseTextData(o,n.tagname,r,!0,!1,!0,!0);l==null&&(l=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:o}]):n.add(this.options.textNodeName,l),s=f+2}else{let f=ge(t,s,this.options.removeNSPrefix),o=f.tagName;const l=f.rawTagName;let u=f.tagExp,d=f.attrExpPresent,c=f.closeIndex;this.options.transformTagName&&(o=this.options.transformTagName(o)),n&&i&&n.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,n,r,!1));const g=n;g&&this.options.unpairedTags.indexOf(g.tagname)!==-1&&(n=this.tagsNodeStack.pop(),r=r.substring(0,r.lastIndexOf("."))),o!==e.tagname&&(r+=r?"."+o:o);const h=s;if(this.isItStopNode(this.options.stopNodes,r,o)){let v="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)o[o.length-1]==="/"?(o=o.substr(0,o.length-1),r=r.substr(0,r.length-1),u=o):u=u.substr(0,u.length-1),s=f.closeIndex;else if(this.options.unpairedTags.indexOf(o)!==-1)s=f.closeIndex;else{const A=this.readStopNodeData(t,l,c+1);if(!A)throw new Error(`Unexpected end of ${l}`);s=A.i,v=A.tagContent}const N=new W(o);o!==u&&d&&(N[":@"]=this.buildAttributesMap(u,r,o)),v&&(v=this.parseTextData(v,o,r,!0,d,!0,!0)),r=r.substr(0,r.lastIndexOf(".")),N.add(this.options.textNodeName,v),this.addChild(n,N,r,h)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){o[o.length-1]==="/"?(o=o.substr(0,o.length-1),r=r.substr(0,r.length-1),u=o):u=u.substr(0,u.length-1),this.options.transformTagName&&(o=this.options.transformTagName(o));const v=new W(o);o!==u&&d&&(v[":@"]=this.buildAttributesMap(u,r,o)),this.addChild(n,v,r,h),r=r.substr(0,r.lastIndexOf("."))}else{const v=new W(o);this.tagsNodeStack.push(n),o!==u&&d&&(v[":@"]=this.buildAttributesMap(u,r,o)),this.addChild(n,v,r,h),n=v}i="",s=c}}else i+=t[s];return e.child};function an(t,e,n,i){this.options.captureMetaData||(i=void 0);const r=this.options.updateTag(e.tagname,n,e[":@"]);r===!1||(typeof r=="string"&&(e.tagname=r),t.addChild(e,i))}const fn=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const n=this.docTypeEntities[e];t=t.replace(n.regx,n.val)}for(let e in this.lastEntities){const n=this.lastEntities[e];t=t.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const n=this.htmlEntities[e];t=t.replace(n.regex,n.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function ln(t,e,n,i){return t&&(i===void 0&&(i=e.child.length===0),t=this.parseTextData(t,e.tagname,n,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,i),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function un(t,e,n){const i="*."+n;for(const r in t){const s=t[r];if(i===s||e===s)return!0}return!1}function cn(t,e,n=">"){let i,r="";for(let s=e;s<t.length;s++){let a=t[s];if(i)a===i&&(i="");else if(a==='"'||a==="'")i=a;else if(a===n[0])if(n[1]){if(t[s+1]===n[1])return{data:r,index:s}}else return{data:r,index:s};else a==="	"&&(a=" ");r+=a}}function z(t,e,n,i){const r=t.indexOf(e,n);if(r===-1)throw new Error(i);return r+e.length-1}function ge(t,e,n,i=">"){const r=cn(t,e+1,i);if(!r)return;let s=r.data;const a=r.index,f=s.search(/\s/);let o=s,l=!0;f!==-1&&(o=s.substring(0,f),s=s.substring(f+1).trimStart());const u=o;if(n){const d=o.indexOf(":");d!==-1&&(o=o.substr(d+1),l=o!==r.data.substr(d+1))}return{tagName:o,tagExp:s,closeIndex:a,attrExpPresent:l,rawTagName:u}}function dn(t,e,n){const i=n;let r=1;for(;n<t.length;n++)if(t[n]==="<")if(t[n+1]==="/"){const s=z(t,">",n,`${e} is not closed`);if(t.substring(n+2,s).trim()===e&&(r--,r===0))return{tagContent:t.substring(i,n),i:s};n=s}else if(t[n+1]==="?")n=z(t,"?>",n+1,"StopNode is not closed.");else if(t.substr(n+1,3)==="!--")n=z(t,"-->",n+3,"StopNode is not closed.");else if(t.substr(n+1,2)==="![")n=z(t,"]]>",n,"StopNode is not closed.")-2;else{const s=ge(t,n,">");s&&((s&&s.tagName)===e&&s.tagExp[s.tagExp.length-1]!=="/"&&r++,n=s.closeIndex)}}function pe(t,e,n){if(e&&typeof t=="string"){const i=t.trim();return i==="true"?!0:i==="false"?!1:Wt(t,n)}else return _t(t)?t:""}const de=W.getMetaDataSymbol();function hn(t,e){return Ye(t,e)}function Ye(t,e,n){let i;const r={};for(let s=0;s<t.length;s++){const a=t[s],f=gn(a);let o="";if(n===void 0?o=f:o=n+"."+f,f===e.textNodeName)i===void 0?i=a[f]:i+=""+a[f];else{if(f===void 0)continue;if(a[f]){let l=Ye(a[f],e,o);const u=vn(l,e);a[de]!==void 0&&(l[de]=a[de]),a[":@"]?pn(l,a[":@"],o,e):Object.keys(l).length===1&&l[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?l=l[e.textNodeName]:Object.keys(l).length===0&&(e.alwaysCreateTextNode?l[e.textNodeName]="":l=""),r[f]!==void 0&&r.hasOwnProperty(f)?(Array.isArray(r[f])||(r[f]=[r[f]]),r[f].push(l)):e.isArray(f,o,u)?r[f]=[l]:r[f]=l}}}return typeof i=="string"?i.length>0&&(r[e.textNodeName]=i):i!==void 0&&(r[e.textNodeName]=i),r}function gn(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const i=e[n];if(i!==":@")return i}}function pn(t,e,n,i){if(e){const r=Object.keys(e),s=r.length;for(let a=0;a<s;a++){const f=r[a];i.isArray(f,n+"."+f,!0,!0)?t[f]=[e[f]]:t[f]=e[f]}}}function vn(t,e){const{textNodeName:n}=e,i=Object.keys(t).length;return!!(i===0||i===1&&(t[n]||typeof t[n]=="boolean"||t[n]===0))}class Nn{constructor(e){this.externalEntities={},this.options=Lt(e)}parse(e,n){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});const s=It(e,n);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const i=new Dt(this.options);i.addExternalEntities(this.externalEntities);const r=i.parseXml(e);return this.options.preserveOrder||r===void 0?r:hn(r,this.options)}addEntity(e,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=n}static getMetaDataSymbol(){return W.getMetaDataSymbol()}}const bn=`
`;function En(t,e){let n="";return e.format&&e.indentBy.length>0&&(n=bn),Ue(t,e,"",n)}function Ue(t,e,n,i){let r="",s=!1;for(let a=0;a<t.length;a++){const f=t[a],o=Tn(f);if(o===void 0)continue;let l="";if(n.length===0?l=o:l=`${n}.${o}`,o===e.textNodeName){let h=f[o];yn(l,e)||(h=e.tagValueProcessor(o,h),h=Ge(h,e)),s&&(r+=i),r+=h,s=!1;continue}else if(o===e.cdataPropName){s&&(r+=i),r+=`<![CDATA[${f[o][0][e.textNodeName]}]]>`,s=!1;continue}else if(o===e.commentPropName){r+=i+`<!--${f[o][0][e.textNodeName]}-->`,s=!0;continue}else if(o[0]==="?"){const h=xe(f[":@"],e),v=o==="?xml"?"":i;let N=f[o][0][e.textNodeName];N=N.length!==0?" "+N:"",r+=v+`<${o}${N}${h}?>`,s=!0;continue}let u=i;u!==""&&(u+=e.indentBy);const d=xe(f[":@"],e),c=i+`<${o}${d}`,g=Ue(f[o],e,l,u);e.unpairedTags.indexOf(o)!==-1?e.suppressUnpairedNode?r+=c+">":r+=c+"/>":(!g||g.length===0)&&e.suppressEmptyNode?r+=c+"/>":g&&g.endsWith(">")?r+=c+`>${g}${i}</${o}>`:(r+=c+">",g&&i!==""&&(g.includes("/>")||g.includes("</"))?r+=i+e.indentBy+g+i:r+=g,r+=`</${o}>`),s=!0}return r}function Tn(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const i=e[n];if(t.hasOwnProperty(i)&&i!==":@")return i}}function xe(t,e){let n="";if(t&&!e.ignoreAttributes)for(let i in t){if(!t.hasOwnProperty(i))continue;let r=e.attributeValueProcessor(i,t[i]);r=Ge(r,e),r===!0&&e.suppressBooleanAttributes?n+=` ${i.substr(e.attributeNamePrefix.length)}`:n+=` ${i.substr(e.attributeNamePrefix.length)}="${r}"`}return n}function yn(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let n=t.substr(t.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===t||e.stopNodes[i]==="*."+n)return!0;return!1}function Ge(t,e){if(t&&t.length>0&&e.processEntities)for(let n=0;n<e.entities.length;n++){const i=e.entities[n];t=t.replace(i.regex,i.val)}return t}const wn={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Z(t){this.options=Object.assign({},wn,t),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=Xe(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=In),this.processTextOrObjNode=_n,this.options.format?(this.indentate=An,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Z.prototype.build=function(t){return this.options.preserveOrder?En(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0,[]).val)};Z.prototype.j2x=function(t,e,n){let i="",r="";const s=n.join(".");for(let a in t)if(Object.prototype.hasOwnProperty.call(t,a))if(typeof t[a]>"u")this.isAttribute(a)&&(r+="");else if(t[a]===null)this.isAttribute(a)||a===this.options.cdataPropName?r+="":a[0]==="?"?r+=this.indentate(e)+"<"+a+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+a+"/"+this.tagEndChar;else if(t[a]instanceof Date)r+=this.buildTextValNode(t[a],a,"",e);else if(typeof t[a]!="object"){const f=this.isAttribute(a);if(f&&!this.ignoreAttributesFn(f,s))i+=this.buildAttrPairStr(f,""+t[a]);else if(!f)if(a===this.options.textNodeName){let o=this.options.tagValueProcessor(a,""+t[a]);r+=this.replaceEntitiesValue(o)}else r+=this.buildTextValNode(t[a],a,"",e)}else if(Array.isArray(t[a])){const f=t[a].length;let o="",l="";for(let u=0;u<f;u++){const d=t[a][u];if(!(typeof d>"u"))if(d===null)a[0]==="?"?r+=this.indentate(e)+"<"+a+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+a+"/"+this.tagEndChar;else if(typeof d=="object")if(this.options.oneListGroup){const c=this.j2x(d,e+1,n.concat(a));o+=c.val,this.options.attributesGroupName&&d.hasOwnProperty(this.options.attributesGroupName)&&(l+=c.attrStr)}else o+=this.processTextOrObjNode(d,a,e,n);else if(this.options.oneListGroup){let c=this.options.tagValueProcessor(a,d);c=this.replaceEntitiesValue(c),o+=c}else o+=this.buildTextValNode(d,a,"",e)}this.options.oneListGroup&&(o=this.buildObjectNode(o,a,l,e)),r+=o}else if(this.options.attributesGroupName&&a===this.options.attributesGroupName){const f=Object.keys(t[a]),o=f.length;for(let l=0;l<o;l++)i+=this.buildAttrPairStr(f[l],""+t[a][f[l]])}else r+=this.processTextOrObjNode(t[a],a,e,n);return{attrStr:i,val:r}};Z.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function _n(t,e,n,i){const r=this.j2x(t,n+1,i.concat(e));return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,r.attrStr,n):this.buildObjectNode(r.val,e,r.attrStr,n)}Z.prototype.buildObjectNode=function(t,e,n,i){if(t==="")return e[0]==="?"?this.indentate(i)+"<"+e+n+"?"+this.tagEndChar:this.indentate(i)+"<"+e+n+this.closeTag(e)+this.tagEndChar;{let r="</"+e+this.tagEndChar,s="";return e[0]==="?"&&(s="?",r=""),(n||n==="")&&t.indexOf("<")===-1?this.indentate(i)+"<"+e+n+s+">"+t+r:this.options.commentPropName!==!1&&e===this.options.commentPropName&&s.length===0?this.indentate(i)+`<!--${t}-->`+this.newLine:this.indentate(i)+"<"+e+n+s+this.tagEndChar+t+this.indentate(i)+r}};Z.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};Z.prototype.buildTextValNode=function(t,e,n,i){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(i)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(i)+"<"+e+n+"?"+this.tagEndChar;{let r=this.options.tagValueProcessor(e,t);return r=this.replaceEntitiesValue(r),r===""?this.indentate(i)+"<"+e+n+this.closeTag(e)+this.tagEndChar:this.indentate(i)+"<"+e+n+">"+r+"</"+e+this.tagEndChar}};Z.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const n=this.options.entities[e];t=t.replace(n.regex,n.val)}return t};function An(t){return this.options.indentBy.repeat(t)}function In(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}var mn=F('<h2 class="svelte-n7vocc">Cultural Reference</h2>'),Pn=F('<h2 class="svelte-n7vocc">Editorial Commentary:</h2>'),Cn=F('<li class="svelte-n7vocc"> </li>'),On=F('<h2 class="svelte-n7vocc">Collation:</h2> <ul class="svelte-n7vocc"></ul>',1),Sn=F('<h2 class="svelte-n7vocc">Other Notes:</h2>'),xn=F('<p class="svelte-n7vocc"> </p>'),kn=F("<!> <!>",1),Vn=F('<div class="svelte-n7vocc"><h1 class="svelte-n7vocc">Notes:</h1> <!></div>');function Mn(t,e){be(e,!0);let n=ht(e,"internalRef",15),i=J(he(new Array)),r=J(!0);e.noteData.forEach(o=>{o.type=="collation"&&(console.log(o.text),X(i,JSON.parse(o.text),!0),X(r,!1))});var s=Je(),a=ne(s);{var f=o=>{var l=Vn(),u=U(L(l),2);oe(u,17,()=>e.noteData,ie,(d,c)=>{var g=kn(),h=ne(g);{var v=T=>{var p=mn();V(T,p)},N=(T,p)=>{{var b=M=>{var y=Pn();V(M,y)},K=(M,y)=>{{var m=w=>{var P=On(),C=U(ne(P),2);oe(C,21,()=>E(i),ie,(k,B)=>{var R=Cn(),$=L(R,!0);O(R),j(()=>Q($,E(B).item[0]["#text"])),V(k,R)}),O(C),V(w,P)},_=w=>{var P=Sn();V(w,P)};q(M,w=>{E(c).type==="collation"?w(m):w(_,!1)},y)}};q(T,M=>{E(c).type==="e"?M(b):M(K,!1)},p)}};q(h,T=>{E(c).type==="culture"?T(v):T(N,!1)})}var A=U(h,2);{var S=T=>{var p=xn(),b=L(p,!0);O(p),j(()=>Q(b,E(c).text)),V(T,p)};q(A,T=>{E(r)==!0&&T(S)})}V(d,g)}),O(l),gt(l,d=>n(d),()=>n()),j(()=>Et(l,`left: ${e.positionX??""}px; top: ${e.positionY??""}px;`)),V(o,l)};q(a,o=>{e.visible==!0&&o(f)})}V(t,s),Ee()}function Ln(t,e,n,i){const{clientX:r,clientY:s}=t;console.log("here"),X(e,!0),X(n,r,!0),X(i,s,!0),t.stopPropagation()}var Fn=F('<p class="svelte-m66nwu"> </p>'),Rn=F('<h3 class="svelte-m66nwu"> </h3>'),Bn=F("<!> <!>",1);function $n(t,e){be(e,!0);let n=J(!1),i=J(0),r=J(0),s=J(void 0);async function a(c){await ut(),E(s)!=null&&E(n)==!0&&(E(s).contains(c.target)||(console.log("clicked outside"),X(n,!1)))}var f=Bn();ct("click",lt,a);var o=ne(f);{var l=c=>{var g=Fn();g.__click=[Ln,n,i,r];var h=L(g,!0);O(g),j(()=>Q(h,e.pageData.text)),V(c,g)},u=(c,g)=>{{var h=v=>{var N=Rn(),A=L(N,!0);O(N),j(()=>Q(A,e.pageData.text)),V(v,N)};q(c,v=>{e.pageData.type==="head"&&v(h)},g)}};q(o,c=>{e.pageData.type==="p"?c(l):c(u,!1)})}var d=U(o,2);Mn(d,{get noteData(){return e.pageData.notes},get positionX(){return E(i)},get positionY(){return E(r)},get visible(){return E(n)},get internalRef(){return E(s)},set internalRef(c){X(s,c,!0)}}),V(t,f),Ee()}Fe(["click"]);function Xn(t,e){X(e,E(e)-2),Math.min(Math.max(E(e),0),12)}function Yn(t,e){X(e,E(e)+2),Math.min(Math.max(E(e),0),12)}var Un=F('<div class="page svelte-1k6udiw"></div>'),Gn=F('<div class="book_container svelte-1k6udiw"><div class="header_container svelte-1k6udiw"><h1 class="svelte-1k6udiw"> </h1></div> <div class="book svelte-1k6udiw"></div> <div class="footer_container svelte-1k6udiw"><p class="svelte-1k6udiw"> </p><p class="svelte-1k6udiw"> </p></div></div> <div class="meta_container svelte-1k6udiw"><div class="page_turn_buttons_container svelte-1k6udiw"><button class="svelte-1k6udiw">Previous Page</button><button class="svelte-1k6udiw">Next Page</button></div></div>',1);function Jn(t,e){be(e,!0);const n={preserveOrder:!0,ignoreAttributes:!1},i=new Nn(n);new Z;let r=J(he(new Array)),s=he(new Array),a=J(0);function f(y){var _,w;let m=[];if(y){console.log(JSON.stringify(y));for(const P of y){const C=Object.keys(P)[0],k=(_=P[C])==null?void 0:_[0],B=(w=P[C])==null?void 0:w.slice(1),R=B.map($=>$[":@"]["@_type"]);if(C==="pb")s.push(m),m=[];else{const $=typeof k=="object"&&"#text"in k?String(k["#text"]):"";let D=new Array;B.length!=0&&(D=B.map((se,fe)=>R[fe]=="collation"?JSON.stringify(se.note[0].list):se.note[0]["#text"]).map((se,fe)=>({type:R[fe],text:se}))),m.push({type:C,text:$,notes:D})}}s.push(m)}}dt(async()=>{var m,_,w,P,C,k,B,R,$;const y=await fetch("${base}/joyce.xml");X(r,i.parse(await y.text()),!0),console.log("Here:"+JSON.stringify(E(r))),f((w=(_=(m=E(r)[4])==null?void 0:m.TEI[1])==null?void 0:_.text[0])==null?void 0:w.front),f((k=(C=(P=E(r)[4])==null?void 0:P.TEI[1])==null?void 0:C.text[1])==null?void 0:k.body),f(($=(R=(B=E(r)[4])==null?void 0:B.TEI[1])==null?void 0:R.text[2])==null?void 0:$.back),console.log(JSON.stringify(s))});function o(y,m){var _={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},w="";if(y-m>0)return String(y-m);var P=Math.abs(y-m);for(var C of Object.keys(_)){var k=Math.floor(P/_[C]);P-=k*_[C],w+=C.repeat(k)}return w}var l=Gn(),u=ne(l),d=L(u),c=L(d),g=L(c);O(c),O(d);var h=U(d,2);oe(h,21,()=>s.slice(E(a),E(a)+2),ie,(y,m)=>{var _=Un();oe(_,21,()=>E(m),ie,(w,P)=>{$n(w,{get pageData(){return E(P)}})}),O(_),V(y,_)}),O(h);var v=U(h,2),N=L(v),A=L(N,!0);O(N);var S=U(N),T=L(S,!0);O(S),O(v),O(u);var p=U(u,2),b=L(p),K=L(b);K.__click=[Xn,a];var M=U(K);M.__click=[Yn,a],O(b),O(p),j((y,m)=>{var _;Q(g,`${((_=E(r)[4])==null?void 0:_.TEI[0].teiHeader[0].fileDesc[0].titleStmt[0].title[0]["#text"])??""} by James Joyce`),Q(A,y),Q(T,m)},[()=>o(E(a),8),()=>o(E(a)+1,8)]),V(t,l),Ee()}Fe(["click"]);function Dn(t){Jn(t,{})}export{Dn as component};
